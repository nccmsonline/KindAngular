/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingReturn,uselessCode} checked by tsc
 */
import { Component, Input, Output, EventEmitter } from '@angular/core';
/** @enum {number} */
var CLOCK_TYPE = {
    HOURS: 1,
    MINUTES: 2,
};
export { CLOCK_TYPE };
CLOCK_TYPE[CLOCK_TYPE.HOURS] = 'HOURS';
CLOCK_TYPE[CLOCK_TYPE.MINUTES] = 'MINUTES';
/**
 * @record
 */
export function ITime() { }
if (false) {
    /** @type {?} */
    ITime.prototype.hour;
    /** @type {?} */
    ITime.prototype.minute;
    /** @type {?} */
    ITime.prototype.meriden;
    /** @type {?} */
    ITime.prototype.format;
}
var WClockComponent = /** @class */ (function () {
    function WClockComponent() {
        this.userTimeChange = new EventEmitter();
        this.viewChange = new EventEmitter();
        this.steps = new Array();
    }
    /**
     * @return {?}
     */
    WClockComponent.prototype.ngOnChanges = /**
     * @return {?}
     */
    function () {
        this.setupUI();
    };
    /**
     * @return {?}
     */
    WClockComponent.prototype.setupUI = /**
     * @return {?}
     */
    function () {
        this.steps = new Array();
        switch (this.currentView) {
            case CLOCK_TYPE.HOURS:
                for (var i = 1; i <= this.userTime.format; i++) {
                    this.steps.push(i);
                    this.selectedTimePart = this.userTime.hour || 0;
                    if (this.selectedTimePart > this.userTime.format) {
                        this.selectedTimePart -= this.userTime.format;
                    }
                }
                break;
            case CLOCK_TYPE.MINUTES:
                for (var i = 5; i <= 55; i += 5) {
                    this.steps.push(i);
                }
                this.steps.push(0);
                this.selectedTimePart = this.userTime.minute || 0;
                break;
        }
    };
    /**
     * @return {?}
     */
    WClockComponent.prototype.getPointerStyle = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var divider = 1;
        switch (this.currentView) {
            case CLOCK_TYPE.HOURS:
                divider = this.userTime.format;
                break;
            case CLOCK_TYPE.MINUTES:
                divider = 60;
                break;
        }
        /** @type {?} */
        var degrees = 0;
        if (this.currentView === CLOCK_TYPE.HOURS) {
            degrees = Math.round(this.userTime.hour * (360 / divider)) - 180;
        }
        else {
            degrees = Math.round(this.userTime.minute * (360 / divider)) - 180;
        }
        /** @type {?} */
        var style = {
            '-webkit-transform': 'rotate(' + degrees + 'deg)',
            '-ms-transform': 'rotate(' + degrees + 'deg)',
            transform: 'rotate(' + degrees + 'deg)'
        };
        return style;
    };
    /**
     * @param {?} step
     * @param {?} index
     * @return {?}
     */
    WClockComponent.prototype.getTimeValueClass = /**
     * @param {?} step
     * @param {?} index
     * @return {?}
     */
    function (step, index) {
        if (this.currentView === CLOCK_TYPE.HOURS) {
            this.STEP_DEG = 360 / this.userTime.format;
        }
        else {
            this.STEP_DEG = 360 / 12;
        }
        /** @type {?} */
        var classes = 'w-clock-step w-clock-deg' + this.STEP_DEG * (index + 1);
        if (this.selectedTimePart === step) {
            classes += ' mat-primary';
        }
        return classes;
    };
    /**
     * @param {?} step
     * @return {?}
     */
    WClockComponent.prototype.changeTimeValue = /**
     * @param {?} step
     * @return {?}
     */
    function (step) {
        if (this.currentView === CLOCK_TYPE.HOURS) {
            this.userTime.hour = step;
            // auto switch to minutes
            this.viewChange.emit(CLOCK_TYPE.MINUTES);
        }
        else {
            this.userTime.minute = step;
            // auto switch to hours
            this.viewChange.emit(CLOCK_TYPE.HOURS);
        }
        this.userTimeChange.emit(this.userTime);
    };
    WClockComponent.decorators = [
        { type: Component, args: [{
                    selector: 'w-clock',
                    template: "<div fxLayout=\"row\" fxLayoutAlign=\"center center\" class=\"w-clock-wrapper\">\n    <div class=\"w-clock\">\n        <div class=\"w-clock-container\">\n            \n            <!-- Clock center -->\n            <button  mat-mini-fab [color]=\"color\" class=\"w-clock-center\"></button>\n\n            <!-- Clock hand -->\n            <mat-toolbar [ngStyle]=\"getPointerStyle()\" [color]=\"color\" class=\"w-pointer\">\n                <button mat-mini-fab [color]=\"color\" class=\"w-clock-selected\"></button>\n            </mat-toolbar>\n            \n            <!-- Hour / Minute number faces -->\n            <div *ngFor=\"let step of steps; let i = index\" [class]=\"getTimeValueClass(step, i)\" >\n                <button mat-mini-fab\n                    [color]=\"selectedTimePart === step ? color : ''\"\n                    (click)=\"changeTimeValue(step)\">\n                    {{ step }}\n                </button>\n            </div>\n\n        </div>\n    </div>\n</div>",
                    styles: [".w-clock-wrapper{height:100%;padding:0 24px}.w-clock-wrapper .w-clock{width:200px;height:200px;border-radius:50%;cursor:pointer;padding:24px;background:#ededed}.w-clock-wrapper .w-clock .w-clock-container{width:100%;height:100%;position:relative;display:block}.w-clock-wrapper .w-clock .w-clock-center{height:6px;width:6px;position:absolute;left:0;right:0;top:0;bottom:0;margin:auto;border-radius:50%}.w-clock-wrapper .w-clock .w-pointer{box-shadow:none;width:1px;height:50%;position:absolute;left:0;right:0;bottom:0;margin:0 auto;padding:0;-webkit-transform-origin:top center;transform-origin:top center;transition:transform .2s;transition:transform .2s,-webkit-transform .2s;z-index:0;pointer-events:none}.w-clock-wrapper .w-clock .w-clock-step{display:block;position:absolute;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);transition:transform .2s;transition:transform .2s,-webkit-transform .2s}.w-clock-wrapper .w-clock .w-clock-step .mat-mini-fab{box-shadow:none;background-color:transparent}.w-clock-wrapper .w-clock .w-clock-selected{position:absolute;bottom:-19px;left:-19px;min-width:0;min-height:0;pointer-events:none;box-shadow:none;cursor:none}.w-clock-deg0{top:0;left:50%}.w-clock-deg15{top:1.70370869%;left:62.94095226%}.w-clock-deg30{top:6.69872981%;left:75%}.w-clock-deg45{top:14.64466094%;left:85.35533905%}.w-clock-deg60{top:25%;left:93.30127019%}.w-clock-deg75{top:37.05904774%;left:98.29629131%}.w-clock-deg90{top:50%;left:100%}.w-clock-deg105{top:62.94095226%;left:98.29629131%}.w-clock-deg120{top:75%;left:93.30127019%}.w-clock-deg135{top:85.35533906%;left:85.35533906%}.w-clock-deg150{top:93.30127019%;left:75%}.w-clock-deg165{top:98.29629131%;left:62.94095226%}.w-clock-deg180{top:100%;left:50%}.w-clock-deg195{top:98.29629131%;left:37.05904774%}.w-clock-deg210{top:93.30127019%;left:25%}.w-clock-deg225{top:85.35533906%;left:14.64466094%}.w-clock-deg240{top:75%;left:6.69872981%}.w-clock-deg255{top:62.94095226%;left:1.703708686%}.w-clock-deg270{top:50%;left:0}.w-clock-deg285{top:37.05904774%;left:1.703708686%}.w-clock-deg300{top:25%;left:6.69872981%}.w-clock-deg315{top:14.64466094%;left:14.64466094%}.w-clock-deg330{top:6.69872981%;left:25%}.w-clock-deg345{top:1.703708686%;left:37.05904774%}.w-clock-deg360{top:0;left:50%}"]
                }] }
    ];
    WClockComponent.propDecorators = {
        userTime: [{ type: Input }],
        userTimeChange: [{ type: Output }],
        currentView: [{ type: Input }],
        viewChange: [{ type: Output }],
        color: [{ type: Input }]
    };
    return WClockComponent;
}());
export { WClockComponent };
if (false) {
    /** @type {?} */
    WClockComponent.prototype.userTime;
    /** @type {?} */
    WClockComponent.prototype.userTimeChange;
    /** @type {?} */
    WClockComponent.prototype.currentView;
    /** @type {?} */
    WClockComponent.prototype.viewChange;
    /** @type {?} */
    WClockComponent.prototype.color;
    /** @type {?} */
    WClockComponent.prototype.steps;
    /** @type {?} */
    WClockComponent.prototype.selectedTimePart;
    /** @type {?} */
    WClockComponent.prototype.STEP_DEG;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidy1jbG9jay5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AY2FuZGlkb3NhbGVzL21hdGVyaWFsLXRpbWUtcGlja2VyLyIsInNvdXJjZXMiOlsibGliL3ctY2xvY2svdy1jbG9jay5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sRUFDTCxTQUFTLEVBQ1QsS0FBSyxFQUNMLE1BQU0sRUFDTixZQUFZLEVBRWIsTUFBTSxlQUFlLENBQUM7OztJQUlyQixRQUFTO0lBQ1QsVUFBVzs7Ozs7Ozs7QUFLYiwyQkFLQzs7O0lBSkMscUJBQVU7O0lBQ1YsdUJBQVk7O0lBQ1osd0JBQXFCOztJQUNyQix1QkFBbUI7O0FBR3JCO0lBQUE7UUFPbUIsbUJBQWMsR0FBd0IsSUFBSSxZQUFZLEVBQUUsQ0FBQztRQUd6RCxlQUFVLEdBQUcsSUFBSSxZQUFZLEVBQWMsQ0FBQztRQUl0RCxVQUFLLEdBQUcsSUFBSSxLQUFLLEVBQVUsQ0FBQztJQTBGckMsQ0FBQzs7OztJQXRGQyxxQ0FBVzs7O0lBQVg7UUFDRSxJQUFJLENBQUMsT0FBTyxFQUFFLENBQUM7SUFDakIsQ0FBQzs7OztJQUVPLGlDQUFPOzs7SUFBZjtRQUNFLElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxLQUFLLEVBQVUsQ0FBQztRQUVqQyxRQUFRLElBQUksQ0FBQyxXQUFXLEVBQUU7WUFDeEIsS0FBSyxVQUFVLENBQUMsS0FBSztnQkFDbkIsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFO29CQUM5QyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztvQkFDbkIsSUFBSSxDQUFDLGdCQUFnQixHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxJQUFJLENBQUMsQ0FBQztvQkFFaEQsSUFBSSxJQUFJLENBQUMsZ0JBQWdCLEdB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O1lBRTVCLHVCQUF1QjtZQUN2QixJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsS0FBSyxDQUFDLENBQUM7U0FDeEM7UUFDRCxJQUFJLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7SUFDMUMsQ0FBQzs7Z0JBdkdGLFNBQVMsU0FBQztvQkFDVCxRQUFRLEVBQUUsU0FBUztvQkFFbkIsMitCQUF1Qzs7aUJBQ3hDOzs7MkJBRUUsS0FBSztpQ0FDTCxNQUFNOzhCQUVOLEtBQUs7NkJBQ0wsTUFBTTt3QkFFTixLQUFLOztJQTRGUixzQkFBQztDQUFBLEFBeEdELElBd0dDO1NBbkdZLGVBQWU7OztJQUMxQixtQ0FBZ0M7O0lBQ2hDLHlDQUEwRTs7SUFFMUUsc0NBQXdDOztJQUN4QyxxQ0FBNkQ7O0lBRTdELGdDQUE4Qjs7SUFFOUIsZ0NBQW1DOztJQUNuQywyQ0FBaUI7O0lBQ2pCLG1DQUF5QiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIENvbXBvbmVudCxcbiAgSW5wdXQsXG4gIE91dHB1dCxcbiAgRXZlbnRFbWl0dGVyLFxuICBPbkNoYW5nZXNcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5cbi8vIEN1cnJlbnQgdHlwZSB0byBzaG93XG5leHBvcnQgZW51bSBDTE9DS19UWVBFIHtcbiAgSE9VUlMgPSAxLFxuICBNSU5VVEVTID0gMlxufVxuXG5leHBvcnQgdHlwZSBUaW1lRm9ybWF0ID0gMTIgfCAyNDtcblxuZXhwb3J0IGludGVyZmFjZSBJVGltZSB7XG4gIGhvdXI6IGFueTtcbiAgbWludXRlOiBhbnk7XG4gIG1lcmlkZW46ICdQTScgfCAnQU0nO1xuICBmb3JtYXQ6IFRpbWVGb3JtYXQ7XG59XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ3ctY2xvY2snLFxuICBzdHlsZVVybHM6IFsnLi93LWNsb2NrLmNvbXBvbmVudC5zY3NzJ10sXG4gIHRlbXBsYXRlVXJsOiAnLi93LWNsb2NrLmNvbXBvbmVudC5odG1sJ1xufSlcbmV4cG9ydCBjbGFzcyBXQ2xvY2tDb21wb25lbnQgaW1wbGVtZW50cyBPbkNoYW5nZXMge1xuICBASW5wdXQoKSBwdWJsaWMgdXNlclRpbWU6IElUaW1lO1xuICBAT3V0cHV0KCkgcHVibGljIHVzZXJUaW1lQ2hhbmdlOiBFdmVudEVtaXR0ZXI8SVRpbWU+ID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuXG4gIEBJbnB1dCgpIHB1YmxpYyBjdXJyZW50VmlldzogQ0xPQ0tfVFlQRTtcbiAgQE91dHB1dCgpIHB1YmxpYyB2aWV3Q2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcjxDTE9DS19UWVBFPigpO1xuXG4gIEBJbnB1dCgpIHB1YmxpYyBjb2xvcjogc3RyaW5nO1xuXG4gIHB1YmxpYyBzdGVwcyA9IG5ldyBBcnJheTxudW1iZXI+KCk7XG4gIHNlbGVjdGVkVGltZVBhcnQ7XG4gIHByaXZhdGUgU1RFUF9ERUc6IG51bWJlcjtcblxuICBuZ09uQ2hhbmdlcygpIHtcbiAgICB0aGlzLnNldHVwVUkoKTtcbiAgfVxuXG4gIHByaXZhdGUgc2V0dXBVSSgpIHtcbiAgICB0aGlzLnN0ZXBzID0gbmV3IEFycmF5PG51bWJlcj4oKTtcblxuICAgIHN3aXRjaCAodGhpcy5jdXJyZW50Vmlldykge1xuICAgICAgY2FzZSBDTE9DS19UWVBFLkhPVVJTOlxuICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8PSB0aGlzLnVzZXJUaW1lLmZvcm1hdDsgaSsrKSB7XG4gICAgICAgICAgdGhpcy5zdGVwcy5wdXNoKGkpO1xuICAgICAgICAgIHRoaXMuc2VsZWN0ZWRUaW1lUGFydCA9IHRoaXMudXNlclRpbWUuaG91ciB8fCAwO1xuXG4gICAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRUaW1lUGFydCA+IHRoaXMudXNlclRpbWUuZm9ybWF0KSB7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkVGltZVBhcnQgLT0gdGhpcy51c2VyVGltZS5mb3JtYXQ7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlIENMT0NLX1RZUEUuTUlOVVRFUzpcbiAgICAgICAgZm9yIChsZXQgaSA9IDU7IGkgPD0gNTU7IGkgKz0gNSkge1xuICAgICAgICAgIHRoaXMuc3RlcHMucHVzaChpKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnN0ZXBzLnB1c2goMCk7XG4gICAgICAgIHRoaXMuc2VsZWN0ZWRUaW1lUGFydCA9IHRoaXMudXNlclRpbWUubWludXRlIHx8IDA7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIGdldFBvaW50ZXJTdHlsZSgpIHtcbiAgICBsZXQgZGl2aWRlciA9IDE7XG4gICAgc3dpdGNoICh0aGlzLmN1cnJlbnRWaWV3KSB7XG4gICAgICBjYXNlIENMT0NLX1RZUEUuSE9VUlM6XG4gICAgICAgIGRpdmlkZXIgPSB0aGlzLnVzZXJUaW1lLmZvcm1hdDtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgQ0xPQ0tfVFlQRS5NSU5VVEVTOlxuICAgICAgICBkaXZpZGVyID0gNjA7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIGxldCBkZWdyZWVzID0gMDtcbiAgICBpZiAodGhpcy5jdXJyZW50VmlldyA9PT0gQ0xPQ0tfVFlQRS5IT1VSUykge1xuICAgICAgZGVncmVlcyA9IE1hdGgucm91bmQodGhpcy51c2VyVGltZS5ob3VyICogKDM2MCAvIGRpdmlkZXIpKSAtIDE4MDtcbiAgICB9IGVsc2Uge1xuICAgICAgZGVncmVlcyA9IE1hdGgucm91bmQodGhpcy51c2VyVGltZS5taW51dGUgKiAoMzYwIC8gZGl2aWRlcikpIC0gMTgwO1xuICAgIH1cblxuICAgIGNvbnN0IHN0eWxlID0ge1xuICAgICAgJy13ZWJraXQtdHJhbnNmb3JtJzogJ3JvdGF0ZSgnICsgZGVncmVlcyArICdkZWcpJyxcbiAgICAgICctbXMtdHJhbnNmb3JtJzogJ3JvdGF0ZSgnICsgZGVncmVlcyArICdkZWcpJyxcbiAgICAgIHRyYW5zZm9ybTogJ3JvdGF0ZSgnICsgZGVncmVlcyArICdkZWcpJ1xuICAgIH07XG5cbiAgICByZXR1cm4gc3R5bGU7XG4gIH1cblxuICBnZXRUaW1lVmFsdWVDbGFzcyhzdGVwOiBudW1iZXIsIGluZGV4OiBudW1iZXIpIHtcbiAgICBpZiAodGhpcy5jdXJyZW50VmlldyA9PT0gQ0xPQ0tfVFlQRS5IT1VSUykge1xuICAgICAgdGhpcy5TVEVQX0RFRyA9IDM2MCAvIHRoaXMudXNlclRpbWUuZm9ybWF0O1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLlNURVBfREVHID0gMzYwIC8gMTI7XG4gICAgfVxuICAgIGxldCBjbGFzc2VzID0gJ3ctY2xvY2stc3RlcCB3LWNsb2NrLWRlZycgKyB0aGlzLlNURVBfREVHICogKGluZGV4ICsgMSk7XG5cbiAgICBpZiAodGhpcy5zZWxlY3RlZFRpbWVQYXJ0ID09PSBzdGVwKSB7XG4gICAgICBjbGFzc2VzICs9ICcgbWF0LXByaW1hcnknO1xuICAgIH1cblxuICAgIHJldHVybiBjbGFzc2VzO1xuICB9XG5cbiAgY2hhbmdlVGltZVZhbHVlKHN0ZXA6IG51bWJlcikge1xuICAgIGlmICh0aGlzLmN1cnJlbnRWaWV3ID09PSBDTE9DS19UWVBFLkhPVVJTKSB7XG4gICAgICB0aGlzLnVzZXJUaW1lLmhvdXIgPSBzdGVwO1xuXG4gICAgICAvLyBhdXRvIHN3aXRjaCB0byBtaW51dGVzXG4gICAgICB0aGlzLnZpZXdDaGFuZ2UuZW1pdChDTE9DS19UWVBFLk1JTlVURVMpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnVzZXJUaW1lLm1pbnV0ZSA9IHN0ZXA7XG5cbiAgICAgIC8vIGF1dG8gc3dpdGNoIHRvIGhvdXJzXG4gICAgICB0aGlzLnZpZXdDaGFuZ2UuZW1pdChDTE9DS19UWVBFLkhPVVJTKTtcbiAgICB9XG4gICAgdGhpcy51c2VyVGltZUNoYW5nZS5lbWl0KHRoaXMudXNlclRpbWUpO1xuICB9XG59XG4iXX0=