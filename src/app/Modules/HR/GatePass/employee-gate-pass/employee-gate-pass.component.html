
<div class="preloader" style="display: none;">
  <div class="lds-ripple">
      <div class="lds-pos"></div>
      <div class="lds-pos"></div>
  </div>
</div>

<div id="main-wrapper" data-theme="light" data-layout="vertical" data-navbarbg="skin6" data-sidebartype="full"
  data-sidebar-position="fixed" data-header-position="fixed" data-boxed-layout="full">
<app-header></app-header>
<app-sidebar></app-sidebar>

<div class="page-wrapper" >
  <div class="container-fluid" style="background:#dcdcdc;">
<form autocomplete="off" >
<div class="row">
    <div class="col-12">
          <div class="example-loading-shade" *ngIf="isLoadingResults">
                  <mat-spinner  [diameter]="40" *ngIf="isLoadingResults"></mat-spinner>
        </div>
        <div class="card" style="border-top: 2px solid #0e43af;box-shadow:0 1px 3px rgba(0,0,0,.3);">
            <div class="card-body border-bottom py-2">
              <div class="col-md-12">
               
                      <div class="row">
                    <div class="col-sm-1">
                      
                  

                    </div>
                    
                </div>
              </div>
            </div>
            <div class="col-md-12">
              <div class="row">
          
                  <div class="col-md-5">
                    <div class="row m-1">
                            <div class="col-md-12">
                                    <div class="card-body border-bottom py-2">
                                            <div class="col-md-12">
                                                <div class="row">
                                                  <div class="col-sm-3">
                                                    <button *ngIf="isAddNew" [disabled]="isLoadingResults" type="submit" (click)="validateDetail('add')"  class="btn btn-sm rounded btn-info waves-effect waves-light" >Save</button>
                                                    <button *ngIf="!isAddNew" [disabled]="isLoadingResults" type="submit" (click)="validateDetail('update')"  class="btn btn-sm rounded btn-info waves-effect waves-light" >Update</button>
                                                  </div>  
                                                  <div class="col-sm-3">   
                                                    <button type="submit" [disabled]="isLoadingResults"  (click)="refresh()"  class="btn btn-purple rounded btn-sm waves-effect waves-light" >Referesh</button>      
                                                  </div>
                                                  <div class="col-sm-6">
                                                  <h4 class="card-title m-0">Gate-Pass</h4>
                                                  </div>
                                              </div>
                                            </div>
                                          </div>

                           </div>
                    </div>
                <div class="row m-1">
                <div class="col-md-5">
                      <mat-form-field class="example-full-width">
                        <input matInput placeholder="Emp No" name="EmpNo"
                        [(ngModel)]="EmpNo" [ngModelOptions]="{standalone: true}" (focusout)="showData()"
                        oninput="this.value = this.value.replace(/[^0-9]/g, '').replace(/(\..*)\./g, '$1');">
                      </mat-form-field>
                </div>
                    <div class="col-md-1"> &nbsp;       
               </div>
               
                <div class="col-md-5" >
                    <!-- [min]="WorkingDate" -->
                    <mat-form-field >
                        <input matInput   [matDatepicker]="pickerd" name="myDate" placeholder="Dated"
                            [(ngModel)]='myDate'  readonly [min]="WorkingDate" (change)="onDateChange()"   (dateChange)="onDateChange()"
                            [ngModelOptions]="{standalone: true}">
                        <mat-datepicker-toggle matSuffix [for]="pickerd"></mat-datepicker-toggle>
                        <mat-datepicker #pickerd></mat-datepicker>
                     </mat-form-field>
                  </div>
                </div>
                <div class="row m-1">
                    <div class="col-md-11">
                            <mat-form-field class="example-full-width w-100">
                                    <input matInput placeholder="Name" name="NAME"
                                    [(ngModel)]="newData.NAME" [ngModelOptions]="{standalone: true}" >
                           </mat-form-field>
                    </div>
                </div>
                <div class="row m-1">
                    <div class="col-md-11">
                            <mat-form-field class="example-full-width w-100">
                                    <input matInput placeholder="Designation" name="DESIGNATION"
                                    [(ngModel)]="newData.DESIGNATION" [ngModelOptions]="{standalone: true}" >
                           </mat-form-field>
                    </div>
                </div>
                <div class="row m-1">
                    <div class="col-md-11">
                            <mat-form-field class="example-full-width w-100">
                                    <input matInput placeholder="Department" name="DEPARTMENT"
                                    [(ngModel)]="newData.DEPARTMENT" [ngModelOptions]="{standalone: true}" >
                           </mat-form-field>
                    </div>
                </div>
                <div class="row m-1">
                    <div class="col-md-5">
                        
                        <kendo-timepicker name="INTIME" [format]="'HH:mm'" class="custom-mat-picker"  placeholder="Out Time"  [(ngModel)]="newData.INTIME" [ngModelOptions]="{standalone: true}">
                        </kendo-timepicker>
                        
                    </div>
                    <div class="col-md-1"> &nbsp;
                        </div>
                        <div class="col-md-5">
                   
                         <kendo-timepicker name="OUTTIME" [format]="'HH:mm'" class="custom-mat-picker" placeholder="In Time" [(ngModel)]="newData.OUTTIME" [ngModelOptions]="{standalone: true}">
                        </kendo-timepicker>
                    </div>

                </div>
                <div class="row m-1">
                  <div class="col-md-11">
                        <mat-radio-group class="example-radio-group" [(ngModel)]="newData.GATEPASSTYPE"  [ngModelOptions]="{standalone: true}"  >
                          <mat-radio-button class="example-radio-button" *ngFor="let gayePassType of gayePassType" [value]="gayePassType.id" style="padding-right: 50px;">
                          {{gayePassType.description}} 
                          </mat-radio-button>
                        </mat-radio-group>
                  </div>
                </div>
                <div class="row m-1">
                <div class="col-md-11">
                        <mat-form-field class="example-full-width w-100">
                                <textarea matInput placeholder="Reason for Gate-Pass"  name="REASON" [(ngModel)]="newData.REASON"></textarea>
                        </mat-form-field>
                </div>
              </div>

     
                </div>
                  <div class="col-md-7">
                     <div class="table-scroll mx-1" style="height:450px">
                     
                      <div class="card-body border-top indent-entry px-0 py-2">
                         
                              <table class="table table-striped custom-table tr th w-100" style="height:300px">
                                  <thead>
                                      <tr style="background-color: #666666; color: #ffffff;">
                                          <th scope="col" style="width:15%;">Dated</th>
                                          <th scope="col" style="width:12%; ">Out Time</th>
                                          <th scope="col" style="width:12%;">In Time</th>
                                          <th scope="col" style="width:16%;">Purpose</th>
                                          <th scope="col" style="width:35%;">Reason<br> for Gate-Pass</th>
                                          <!-- <th scope="col" style="width:20%;">Address while <br> on leave</th> -->
                                          <th scope="col" style="width:10%;">Approved</th>
                                          <!-- <th scope="col" style="width:15%;">Approved <br>by HR</th> -->
                                      </tr>
                                  </thead>
                                  <tbody class="font-sm">
                                  <tr *ngFor="let item of gatePassForm ; let i = index" (dblclick)="showLeaveRecord(item)">
                                      <td>{{item.GPDATE|date:'dd-MM-yyyy'}}</td>
                                      <td>{{item.INTIME|date:'hh:mm'}}</td>
                                      <td>{{item.OUTTIME|date:'hh:mm'}}</td>  
                                      <td>{{item.PURPOSE}}</td>
                                      <td>{{item.REASON}}</td>
                                      <!-- <td>{{item.ADDRESS}}</td> -->
                                      <td>{{item.APPROVEDBYAUTHORITY}}</td>  
                                      <!-- <td>{{item.APPROVEDBYHR}}</td> -->
                                  </tr>
                                 </tbody>
                                </table>
                                <!-- <app-camera (pictureTaken)="handleImage($event)"></app-camera>
                                <div class="snapshot" *ngIf="webcamImage">
                                  <img [src]="webcamImage.imageAsDataUrl" />
                                  </div> -->
                          </div>
                       </div>
                  </div> 
              </div>
          </div>
         </div>
    </div>
  </div>
</form>
<app-footer></app-footer>
</div>
</div>
</div>
