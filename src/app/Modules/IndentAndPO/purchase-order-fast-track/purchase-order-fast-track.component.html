<div class="preloader" style="display: none;">
    <div class="lds-ripple">
        <div class="lds-pos"></div>
        <div class="lds-pos"></div>
    </div>
  </div>
  <div id="main-wrapper" data-theme="light" data-layout="vertical" data-navbarbg="skin6" data-sidebartype="full"
    data-sidebar-position="fixed" data-header-position="fixed" data-boxed-layout="full">
  <app-header></app-header>
  <app-sidebar></app-sidebar>
  
  <div class="page-wrapper" >
      <div class="container-fluid" style="background:#dcdcdc;">
  <div class="row">
    <div class="col-12">
      <div class="card" style="border-top: 2px solid #0e43af;box-shadow:0 1px 3px rgba(0,0,0,.3);">
        <div class="card-body border-bottom py-2 mb-2">
          <div class="d-md-flex align-items-center">
              <h4 *ngIf="flag=='N'" class="card-title m-0">{{'fasttrackpo'| translate}}</h4>
              <h4 *ngIf="flag=='Y'" class="card-title m-0">{{'fasttrackjobwork'| translate}}</h4> 
   
              <div class="form-group mr-2 mb-2 ml-auto bd-highlight d-flex">
               <b>{{'lastpono'|translate}}</b>   &nbsp; &nbsp;<input class="form-control form-control-sm"  name="lastpo" style="width: 100px;"  [(ngModel)]="newData.LASTPO" type="text" [ngModelOptions]="{standalone: true}"> &nbsp; &nbsp; &nbsp;
                 <button class="btn btn-sm rounded btn-info waves-effect waves-light" (click)="printPO()" >{{'printpo'| translate}}</button>  &nbsp; &nbsp; &nbsp;
                  <button class="btn btn-sm rounded btn-info waves-effect waves-light" (click)="GeneratePO()" [disabled]="isLoadingResults">{{'generatepo'| translate}}</button>
              </div>
            </div>
        </div>
  
  
  
   
  <!-- </div>
    <div class="col-12"> -->
    <div class="d-flex justify-content-between align-items-stretch w-100 boxed-layout">
      <div class="w-100">
        <div class="example-container mat-elevation-z8">
          <div class="example-loading-shade" *ngIf="isLoadingResults ">
             <mat-spinner  [diameter]="40" *ngIf="isLoadingResults"></mat-spinner> 
            </div>
          </div>
          <div class="example-loading-shade" *ngIf="isLoadingResults ">
              <mat-spinner [diameter]="60" *ngIf="isLoadingResults"></mat-spinner>
          </div>
            <!-- <div class="form-inline ">                     
                  
                     
              <div class="col-sm-1" style="min-width: 110px;">
                <mat-form-field  class="w-100">
                    <input matInput 
                      [matDatepicker]="matDatepicker" placeholder="From date" (dateChange)="refreshList()"
                      [(ngModel)]='fstartDate'   [ngModelOptions]="{standalone: true}">
                    <mat-datepicker-toggle matSuffix [for]="matDatepicker"></mat-datepicker-toggle>
                    <mat-datepicker #matDatepicker></mat-datepicker>
                  </mat-form-field>
                </div>
                <div class="col-sm-1"  style="min-width: 110px;">
                  <mat-form-field  class="w-100">
                    <input matInput 
                      [matDatepicker]="matToDatepicker" placeholder="To date" (dateChange)="refreshList()"
                      [(ngModel)]='fendDate'   [ngModelOptions]="{standalone: true}">
                    <mat-datepicker-toggle matSuffix [for]="matToDatepicker"></mat-datepicker-toggle>
                    <mat-datepicker #matToDatepicker></mat-datepicker>
                  </mat-form-field>
                </div>
                <div class="form-group mr-2 mb-2 ml-auto bd-highlight">
                  <input type="text" class="form-control form-control-sm w-100" (keyup)="applyFilter($event.target.value)"  placeholder="{{'search'|translate}}">
                </div>
    
      </div> -->
  
            
      <!-- <div class="card example-container" style="box-shadow:0 1px 3px rgba(0,0,0,.3);"> -->
        <div class="table-scroll">
            <div class="tab-content m-t-10" id="pills-tabContent">
                <div class="card-body border-top min-width purchase-order px-0">
        <table class="table table-striped custom-table custom-table-big custom-table-big tr th" style="width: 2250px;">
            <thead>
            <tr style="background-color: #666666; color: #ffffff;">
                <th scope="col" style="width: 20px;">{{'chk' | translate}}</th>
                <th scope="col" style="width: 50px;">{{'indentno' | translate}}</th>
                <th scope="col" style="width: 60px;">{{'indentdate' | translate}}</th>
                <th scope="col" style="width: 60px;">{{'itemcode' | translate}}</th>
                <th scope="col" style="width: 250px;" >{{'itemname' | translate}}</th>
                <th scope="col" style="width: 50px;" >{{'uom' | translate}}</th>
                <th scope="col" style="width: 150px;">{{'description' | translate}}</th>
                <th scope="col" style="width: 100px;">{{'hsn' | translate}}</th>
                <th scope="col" style="width: 150px;">{{'party1' | translate}}</th>
                <th scope="col" style="text-align: right;width: 80px;">{{'orderto' | translate}}<br>{{'party1' | translate}}</th>
                <th scope="col" style="width: 80px;">{{'expecteddate1' | translate}}</th>
                <th scope="col" style="text-align: right;width: 80px;">{{'rateparty1' | translate}}</th>
                <th scope="col" style="width: 150px;">{{'party2' | translate}}</th>
                <th scope="col" style="text-align: right;width: 80px;">{{'orderto' | translate}}<br>{{'party2' | translate}}</th>
                <th scope="col" style="width: 80px;">{{'expecteddate1' | translate}}</th>
                <th scope="col" style="text-align: right;width: 80px;">{{'rateparty2' | translate}}</th>
                <th scope="col" style="width: 150px;">{{'party3' | translate}}</th>
                <th scope="col" style="text-align: right;width: 80px;">{{'orderto' | translate}}<br>{{'party3' | translate}}</th>
                <th scope="col" style="width: 80px;">{{'expecteddate1' | translate}}</th>
                <th scope="col" style="text-align: right;width: 80px;">{{'rateparty3' | translate}}</th>
                <th scope="col" style="width: 300px;">{{'remarks' | translate}}</th>
            </tr>
        </thead>
        <tbody class="font-sm">
            <tr *ngFor="let item of indentArrayList ; let i = index">
                <td>
                  <mat-checkbox [ngClass]="{'custom-checkbox-red':item.CHK!=true,'custom-checkbox-green':item.CHK==true}" style="width: 10%;padding-top: 10px;" [(ngModel)]="item.CHK" [ngModelOptions]="{standalone: true}"  (change)="OnIndentSelect($event, item)" ></mat-checkbox> 
                </td>
                <td>{{item.INDENTNO}}</td>
                <td>{{item.INDENTDATE|date:'d-M-y'}}</td>
                <td>{{item.ITEMCODE}}</td>
                <td>{{item.ITEMNAME}}</td>
                <td>{{item.UOM}}</td>
                <td>{{item.DESCRIPTION}}</td>
                <td  *ngIf="item.id !== item.edititemID" >{{item.HSNCODE}}</td>

                <td *ngIf="item.id === item.edititemID" class="wi250px" style="max-width: 100px !important;">
                  <ng-select class="form-control partylist530 custom-slect-box error-border form-control-sm  ng-select-oa itemwid100px" 
                          [(ngModel)]='item.GSTID' name="GSTID"
                          [ngModelOptions]="{standalone: true}" [virtualScroll]="true"
                          (change)="onGSTChange($event,item )"  [items]="gstList" bindLabel="HSNCODE"
                          bindValue="GSTID"  placeholder="Select item GST">
                          <ng-template ng-header-tmp  class="ng-template-oa-class">
                              <table>
                                  <tr>
                                      <th style="width:60px;">
                                          {{'hsncode' | translate}}
                                      </th>
                                      <th style="width:290px;">
                                          {{'gstdescription' | translate}}
                                      </th>
                                      <th style="width:60px;text-align: right;">
                                          {{'igst%' | translate}}
                                      </th>
                                      <th style="width:60px;text-align: right;">
                                          {{'cgst%' | translate}}
                                      </th>
                                      <th style="width:60px;text-align: right;">
                                          {{'sgst%' | translate}}
                                      </th>
                                  </tr>
                                  <ng-template ng-option-tmp let-item="item">
                                      <tr>
                                          <td style="width:100px;">
                                              {{item.HSNCODE}}
                                          </td>
                                          <td style="width:290px;">
                                              {{item.DESCRIPTION}}
                                          </td>
                                          <td style="width:60px;text-align: right;">
                                              {{item.IGST}}
                                          </td>
                                          <td style="width:60px;text-align: right;">
                                              {{item.CGST}}
                                          </td>
                                          <td style="width:40px;text-align: right;">
                                              {{item.SGST}}
                                          </td>
                                      </tr>
                                  </ng-template>
                              </table>
                          </ng-template>
                      </ng-select>
                 </td>
                <td *ngIf="item.id !== item.edititemID">{{item.NAME}}</td>
                <td *ngIf="item.id !== item.edititemID" style="text-align: right;">{{item.QUANTITY1}}</td>
                <td *ngIf="item.id !== item.edititemID">{{item.EXPECTEDDATE|date:'d/M/y'}}</td>
                <td *ngIf="item.id !== item.edititemID" style="text-align: right;">{{item.RATE}}</td>
                <td *ngIf="item.id !== item.edititemID">{{item.NAME2}}</td>
                <td *ngIf="item.id !== item.edititemID" style="text-align: right;">{{item.QUANTITY2}}</td>
                <td *ngIf="item.id !== item.edititemID">{{item.EXPECTEDDATE2|date:'d/M/y'}}</td>
                <td *ngIf="item.id !== item.edititemID" style="text-align: right;">{{item.RATE2}}</td>
                <td *ngIf="item.id !== item.edititemID">{{item.NAME3}}</td>
                <td *ngIf="item.id !== item.edititemID" style="text-align: right;">{{item.QUANTIT3}}</td>
                <td *ngIf="item.id !== item.edititemID">{{item.EXPECTEDDATE3|date:'d/M/y'}}</td>
                <td *ngIf="item.id !== item.edititemID"style="text-align: right;">{{item.RATE3}}</td>

                <td *ngIf="item.id === item.edititemID" class="wi250px" style="max-width: 150px !important;">
                  <ng-select class="form-control partylist530 custom-slect-box error-border form-control-sm  ng-select-oa itemwid150px" 
                          [(ngModel)]='item.ARID1' name="ARID1"
                          [ngModelOptions]="{standalone: true}" [virtualScroll]="true"
                          (change)="onChangeofParty1($event,item )"  [items]="item.supplierArrayList" bindLabel="NAME"
                          bindValue="ARID"  placeholder="Select Party-1">
                          <ng-template ng-header-tmp  class="ng-template-oa-class">
                              <table>
                                  <tr>
                                      <th style="width:300px;">
                                          {{'party' | translate}}
                                      </th>
                                      <th style="width:60px;text-align: right;">
                                          {{'rate' | translate}}
                                      </th>
                                      <th style="width:50px;text-align: right;">
                                        {{'disc%' | translate}}
                                      </th>
                                      <th style="width:50px;text-align: right;">
                                          {{'arno' | translate}}
                                      </th>
                                      <th style="width:90px;text-align: right;">
                                          {{'ardt' | translate}}
                                      </th>
                                  </tr>
                                  <ng-template ng-option-tmp let-item="item">
                                      <tr>
                                          
                                          <td style="width:300px;">
                                              {{item.NAME}}
                                          </td>
                                          <td style="width:60px;text-align: right;">
                                              {{item.RATE}}
                                          </td>
                                          <td style="width:50px;text-align: right;">
                                              {{item.DISC}}
                                          </td>
                                          <td style="width:50px;text-align: right;">
                                            {{item.ARDNO}}
                                          </td>
                                          <td style="width:70px;text-align: right;">
                                              {{item.ARDATE|date:'d/M/y'}}
                                          </td>
                                      </tr>
                                  </ng-template>
                              </table>
                          </ng-template>
                      </ng-select>
                </td>
                <td *ngIf="item.id === item.edititemID" style="text-align: right;">
                    <input type="text" class="form-control w-100 text-right" [(ngModel)]="item.QUANTITY1"  [ngModelOptions]="{standalone: true}" (keyup)="onChnageOfQty1(item)" >
                </td>
                <td *ngIf="item.id === item.edititemID">
                      <mat-form-field class="form-control py-1 mat-form-field-date-picker">
                        <input matInput [matDatepicker]="picker4"
                            [min]="fendDate" name="date"
                            [(ngModel)]='item.EXPECTEDDATE'
                            [ngModelOptions]="{standalone: true}">
                        <mat-datepicker-toggle matSuffix
                            [for]="picker4"></mat-datepicker-toggle>
                        <mat-datepicker #picker4></mat-datepicker>
                      </mat-form-field>
                </td>
                <td *ngIf="item.id === item.edititemID" style="text-align: right;">{{item.RATE}}</td>
                <td *ngIf="item.id === item.edititemID">
                  <ng-select class="form-control partylist530 custom-slect-box error-border form-control-sm  ng-select-oa itemwid150px" 
                        [(ngModel)]='item.ARID2' name="ARID2"
                        [ngModelOptions]="{standalone: true}" [virtualScroll]="true"
                        (change)="onChangeofParty2($event,item )"  [items]="item.supplierArrayList" bindLabel="NAME"
                        bindValue="ARID"  placeholder="Select Party-1">
                        <ng-template ng-header-tmp  class="ng-template-oa-class">
                            <table>
                                <tr>
                                    <th style="width:300px;">
                                        {{'party' | translate}}
                                    </th>
                                    <th style="width:60px;text-align: right;">
                                        {{'rate' | translate}}
                                    </th>
                                    <th style="width:50px;text-align: right;">
                                      {{'disc%' | translate}}
                                    </th>
                                    <th style="width:50px;text-align: right;">
                                        {{'arno' | translate}}
                                    </th>
                                    <th style="width:90px;text-align: right;">
                                        {{'ardt' | translate}}
                                    </th>
                                </tr>
                                <ng-template ng-option-tmp let-item="item">
                                    <tr>
                                        
                                        <td style="width:300px;">
                                            {{item.NAME}}
                                        </td>
                                        <td style="width:60px;text-align: right;">
                                            {{item.RATE}}
                                        </td>
                                        <td style="width:50px;text-align: right;">
                                            {{item.DISC}}
                                        </td>
                                        <td style="width:50px;text-align: right;">
                                          {{item.ARDNO}}
                                        </td>
                                        <td style="width:70px;text-align: right;">
                                            {{item.ARDATE|date:'d/M/y'}}
                                        </td>
                                    </tr>
                                </ng-template>
                            </table>
                        </ng-template>
                    </ng-select>
                </td>
                <td *ngIf="item.id === item.edititemID" style="text-align: right;">
                  <input type="text" class="form-control w-100 text-right" [(ngModel)]="item.QUANTITY2"  [ngModelOptions]="{standalone: true}" (keyup)="onChnageOfQty2(item)" >
                </td>
                <td *ngIf="item.id === item.edititemID">
                  <mat-form-field class="form-control py-1 mat-form-field-date-picker">
                    <input matInput [matDatepicker]="picker4"
                        [min]="fendDate" name="date"
                        [(ngModel)]='item.EXPECTEDDATE2'
                        [ngModelOptions]="{standalone: true}">
                    <mat-datepicker-toggle matSuffix
                        [for]="picker4"></mat-datepicker-toggle>
                    <mat-datepicker #picker4></mat-datepicker>
                  </mat-form-field>
                 </td>
                <td *ngIf="item.id === item.edititemID" style="text-align: right;">{{item.RATE2}}</td>
                <td *ngIf="item.id === item.edititemID">
                  <ng-select class="form-control partylist530 custom-slect-box error-border form-control-sm  ng-select-oa itemwid150px" 
                        [(ngModel)]='item.ARID3' name="ARID3"
                        [ngModelOptions]="{standalone: true}" [virtualScroll]="true"
                        (change)="onChangeofParty3($event,item )"  [items]="item.supplierArrayList" bindLabel="NAME"
                        bindValue="ARID"  placeholder="Select Party-1">
                        <ng-template ng-header-tmp  class="ng-template-oa-class">
                            <table>
                                <tr>
                                    <th style="width:300px;">
                                        {{'party' | translate}}
                                    </th>
                                    <th style="width:60px;text-align: right;">
                                        {{'rate' | translate}}
                                    </th>
                                    <th style="width:50px;text-align: right;">
                                      {{'disc%' | translate}}
                                    </th>
                                    <th style="width:50px;text-align: right;">
                                        {{'arno' | translate}}
                                    </th>
                                    <th style="width:90px;text-align: right;">
                                        {{'ardt' | translate}}
                                    </th>
                                </tr>
                                <ng-template ng-option-tmp let-item="item">
                                    <tr>
                                        
                                        <td style="width:300px;">
                                            {{item.NAME}}
                                        </td>
                                        <td style="width:60px;text-align: right;">
                                            {{item.RATE}}
                                        </td>
                                        <td style="width:50px;text-align: right;">
                                            {{item.DISC}}
                                        </td>
                                        <td style="width:50px;text-align: right;">
                                          {{item.ARDNO}}
                                        </td>
                                        <td style="width:70px;text-align: right;">
                                            {{item.ARDATE|date:'d/M/y'}}
                                        </td>
                                    </tr>
                                </ng-template>
                            </table>
                        </ng-template>
                    </ng-select>
                </td>
                <td *ngIf="item.id === item.edititemID" style="text-align: right;">
                  <input type="text" class="form-control w-100 text-right" [(ngModel)]="item.QUANTITY3"  [ngModelOptions]="{standalone: true}" (keyup)="onChnageOfQty3(item)" >
                </td>
                <td *ngIf="item.id === item.edititemID">
                  <mat-form-field class="form-control py-1 mat-form-field-date-picker">
                    <input matInput [matDatepicker]="picker4"
                        [min]="fendDate" name="date"
                        [(ngModel)]='item.EXPECTEDDATE3'
                        [ngModelOptions]="{standalone: true}">
                    <mat-datepicker-toggle matSuffix
                        [for]="picker4"></mat-datepicker-toggle>
                    <mat-datepicker #picker4></mat-datepicker>
                  </mat-form-field>
                </td>
                <td *ngIf="item.id === item.edititemID"style="text-align: right;">{{item.RATE3}}</td>

                <td>{{item.REMARKS}}</td>
            </tr>
       
        </tbody>
        </table>
    </div>
        </div>
      </div>
    </div>
    </div>
  </div>
  </div>
  </div>
  <app-footer></app-footer>
      </div>
  </div>
  </div>