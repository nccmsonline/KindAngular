<div class="preloader" style="display: none;">
    <div class="lds-ripple">
        <div class="lds-pos"></div>
        <div class="lds-pos"></div>
    </div>
</div>
<div id="main-wrapper" data-theme="light" data-layout="vertical" data-navbarbg="skin6" data-sidebartype="full"
    data-sidebar-position="fixed" data-header-position="fixed" data-boxed-layout="full">
    <app-header></app-header>
    <app-sidebar></app-sidebar>

    <div class="page-wrapper">
        <div class="container-fluid" style="background:#dcdcdc;">
            <form  [formGroup]="machineform" novalidate>
                <div class="example-loading-shade" *ngIf="isLoadingResults ">
                  <mat-spinner [diameter]="60" *ngIf="isLoadingResults"></mat-spinner>
              </div>
                <div class="row">
                    <div class="col-md-12">
                        <div class="card" style="border-top: 2px solid #0e43af;box-shadow:0 1px 3px rgba(0,0,0,.3);"
                            (click)="dropdownHide()">
                            <div class="card-body border-bottom py-2 d-flex">
                                <div class="d-md-flex align-items-center justify-content-between col-md-4">
                                    <div class="d-flex">
                                        <a [routerLink]="['/machine-master']"
                                            class="btn btn-sm rounded btn-warning mr-3"
                                            title="Back to Machine Master"><i
                                                class="mdi mdi-keyboard-backspace"></i></a>
                                        <h4 class="card-title m-0">{{'machinemaster' | translate}}</h4>
                                    </div>

                                </div>
                                <div class="d-flex col-md-8 pr-0">
                                <label class="col-md-9 text-right error-control-label1 required pr-3"
                                                    for="machinecategory">{{'status'|translate}}</label>
                                                <div class="col-md-3 pr-0 pl-1">
                                                    <ngx-select #categoryid class="ngx-custom-select-dropdown"
                                                        placeholder=" Select Status" name="MCCatgName"
                                                        [(ngModel)]="newmachine.WORKINGSTATUS"
                                                        [ngModelOptions]="{standalone: true}" [allowClear]="true"
                                                        [items]="mcstatusarray" optionValueField="MACHINESTATUSID"
                                                        optionTextField="MACHINESTATUS">
                                                    </ngx-select>
                                                </div>
                                                </div>
                            </div>
                            <div class="d-flex- row">
                                <div class="col-md-12 tab-content m-t-10" id="pills-tabContent">
                                    <div class="card-body indent-entry px-0 py-2">
                                        <div class="form-inline">
                                            <div class="form-group row col-md-12 mb-1">
                                                <label *ngIf="action == 'new'"
                                                    class="col-md-2 text-right error-control-label required"
                                                    for="inputPassword4">{{'lastno' | translate}}</label>
                                                <label *ngIf="action != 'new'"
                                                    class="col-md-2 text-right error-control-label required"
                                                    for="inputPassword4">{{'no' | translate}}</label>
                                                <div class="col-md-1 d-flex pr-0">
                                                    <input type="text"
                                                        class="form-control form-control-sm tdAlign readonly-disable"
                                                        name="id" [(ngModel)]="newmachine.id"
                                                        [ngModelOptions]="{standalone: true}" readonly>
                                                </div>
                                                <label class="col-md-2 text-right error-control-label1 required"
                                                    for="inputPassword4">{{'machinename' | translate}}</label>
                                                <div class="col-md-3 d-flex pr-0">
                                                    <input name="MachineName" [(ngModel)]="newmachine.MACHINENAME"
                                                        [ngModelOptions]="{standalone: true}"
                                                        oninput="this.value = this.value.toUpperCase()"
                                                        class="w-100 form-control error-border form-control-sm">


                                                </div>

                                                <label class="col-md-2 text-right error-control-label1 required"
                                                    for="machinecategory">{{'machinecategory'|translate}}</label>
                                                <div class="col-md-2 pr-0">
                                                    <ngx-select #categoryid class="ngx-custom-select-dropdown"
                                                        placeholder=" Select Category" name="MACHINETYPE"
                                                        [(ngModel)]="newmachine.MACHINETYPE"
                                                        [ngModelOptions]="{standalone: true}" [allowClear]="true"
                                                        [items]="mccategoryarray" optionValueField="MACHINETYPEID"
                                                        optionTextField="MACHINETYPE">
                                                    </ngx-select>
                                                </div>

                                            </div>
                                            <div class="form-group row col-md-12 mb-1">
                                                <label class="col-md-2 text-right error-control-label required"
                                                    for="srno">{{'srno' | translate}}</label>
                                                <div class="col-md-2 d-flex pr-0">
                                                    <input name="MCSRNo" [(ngModel)]="newmachine.MACHINESERIALNO"
                                                        [ngModelOptions]="{standalone: true}"
                                                        oninput="this.value = this.value.toUpperCase()"
                                                        class="w-100 form-control error-border form-control-sm" maxlength="100">


                                                </div>
                                                <label class="col-md-1 text-right error-control-label required"
                                                    for="chasisno">{{'chassisno' | translate}}</label>
                                                <div class="col-md-3 d-flex pr-0">
                                                    <input name="MCChassisNo" [(ngModel)]="newmachine.MCCHASSISNO"
                                                        [ngModelOptions]="{standalone: true}"
                                                        oninput="this.value = this.value.toUpperCase()"
                                                        class="w-100 form-control error-border form-control-sm " maxlength="100">


                                                </div>
                                                <label class="col-md-2 text-right error-control-label required"
                                                    for="model">{{'model' | translate}}</label>
                                                <div class="col-md-2 d-flex pr-0">
                                                    <input name="MCModel" [(ngModel)]="newmachine.MCMODEL"
                                                        [ngModelOptions]="{standalone: true}"
                                                        oninput="this.value = this.value.toUpperCase()"
                                                        class="w-100 form-control error-border form-control-sm " maxlength="100">


                                                </div>




                                            </div>
                                            <div class="form-group row col-md-12 mb-2">
                                                <label class="col-md-2 text-right error-control-label required"
                                                    for="capacity">{{'capacity' | translate}}</label>
                                                <div class="col-md-2 d-flex pr-0">
                                                    <input name="MCCapacity" [(ngModel)]="newmachine.MACHINECAPACITY"
                                                        [ngModelOptions]="{standalone: true}"
                                                        oninput="this.value = this.value.toUpperCase()"
                                                        class="w-100 form-control error-border form-control-sm ">


                                                </div>
                                                <label class="col-md-1 text-right error-control-label required"
                                                    for="supplier">{{'supplier' | translate}}</label>
                                                <div class="col-md-3 d-flex pr-0">
                                                    <input (keyup)="searchTermSupplier($event.target.value)"
                                                        name="SUPPLIEDBY" [ngModelOptions]="{standalone: true}"
                                                        [(ngModel)]='newmachine.SUPPLIEDBYNAME'
                                                        [value]="newmachine.SUPPLIEDBYNAME || ''" autocomplete="off"
                                                        class="w-100 form-control error-border form-control-sm">
                                                    <button class="close-icon" style="position: absolute;
                                                  right: 0; top: 8px;" (click)="reset(newmachine)"></button>
                                                    <div *ngIf="arrayItemSupplier != ''" class="search-list-supplier"
                                                        style="margin-top: 24px;width:720px"> 
                                                         <div class="example-loading-shade" *ngIf="isLoading">
                                                            <mat-spinner [diameter]="20" *ngIf="isLoading">
                                                            </mat-spinner>
                                                        </div>
                                                        <table id="selectedValue"
                                                            class="table table-condensed table-striped table-hover">
                                                            <tr class="ui-menu-item" role="menuitem">
                                                                <th>{{'name' | translate}}</th>
                                                                <th>{{'address' | translate}}</th>
                                                            </tr>
                                                            <tr class="ui-menu-item" role="menuitem"
                                                                *ngFor="let result of supplierlist"
                                                                (click)="onChangeOfItemCodeSupplier(result, newmachine)">
                                                                <td>{{ result.NAME }}</td>
                                                                <td>{{ result.ADDRESS1 }}</td>
                                                            </tr>
                                                        </table>
                                                    </div>



                                                </div>
                                                <label class="col-md-2 text-right error-control-label1 required"
                                                for="machinecategory">{{'department'|translate}}</label>
                                            <div class="col-md-2 pr-0">
                                                <ngx-select #categoryid class="ngx-custom-select-dropdown"
                                                    placeholder=" Select Department" name="DEPTID"
                                                    [(ngModel)]="newmachine.DEPTID"
                                                    [ngModelOptions]="{standalone: true}" [allowClear]="true"
                                                    [items]="deptarray" optionValueField="DEPTID"
                                                    optionTextField="DEPTNAME">
                                                </ngx-select>
                                            </div>
                                                <!-- <label class="col-md-2 text-right error-control-label required"
                                                    for="manufacturer">{{'manufacturer' | translate}}</label>
                                                <div class="col-md-2 d-flex pr-0">
                                                    <input name="MCManufacturer" [(ngModel)]="newmachine.MCManufacturer"
                                                        [ngModelOptions]="{standalone: true}"
                                                        oninput="this.value = this.value.toUpperCase()"
                                                        class="w-100 form-control error-border form-control-sm " maxlength="50">
                                                </div> -->




                                            </div>

                                            <div class="form-group row col-md-12 mb-2">

                                                <label class="col-md-2 text-right error-control-label1 required"
                                                for="manufacturer">{{'location' | translate}}</label>
                                            <div class="col-md-2 d-flex pr-0">
                                                <input name="MCManufacturer" [(ngModel)]="newmachine.LOCATION"
                                                    [ngModelOptions]="{standalone: true}"
                                                    oninput="this.value = this.value.toUpperCase()"
                                                    class="w-100 form-control error-border form-control-sm " maxlength="200">
                                            </div>
                                             
                                                <label class="col-md-1 text-right error-control-label required"
                                                    for="supplier">{{'mfdby' | translate}}</label>
                                                <div class="col-md-3 d-flex pr-0">
                                                    <input
                                                        name="MCManufacturer" [ngModelOptions]="{standalone: true}"
                                                        [(ngModel)]='newmachine.MANUFACTURER'
                                                        [value]="newmachine.MCManufacturer || ''" autocomplete="off"
                                                        class="w-100 form-control error-border form-control-sm">
                                                  
                                                </div>

                                                <label class="col-md-2 text-right error-control-label required"
                                                for="capacity">{{'manufacturedon' | translate}}</label>
                                            <div class="col-md-2 d-flex pr-0">
                                                <mat-form-field class="form-control py-1 mat-form-field-date-picker">
                                                    <input matInput [matDatepicker]="picker13" [min]="fystartdate" [max]="myDate"
                                                        [(ngModel)]='newmachine.MANUFACTURINGYEAR' [ngModelOptions]="{standalone: true}"
                                                    >
                                                    <mat-datepicker-toggle matSuffix [for]="picker13">
                                                    </mat-datepicker-toggle>
                                                    <mat-datepicker #picker13>
                                                    </mat-datepicker>
                                                </mat-form-field>

                                            </div>
                                                <!-- <label class="col-md-2 text-right error-control-label required"
                                                    for="manufacturer">{{'manufacturer' | translate}}</label>
                                                <div class="col-md-2 d-flex pr-0">
                                                    <input name="MCManufacturer" [(ngModel)]="newmachine.MCManufacturer"
                                                        [ngModelOptions]="{standalone: true}"
                                                        oninput="this.value = this.value.toUpperCase()"
                                                        class="w-100 form-control error-border form-control-sm " maxlength="50">
                                                </div> -->




                                            </div>
                                            <div class="form-group row col-md-12 mb-2">
                                                <label
                                                    class="col-md-2 text-right">{{'maintainedby' | translate}}</label>
                                                <mat-radio-group [(ngModel)]="newmachine.MAINTTYPE"
                                                    [ngModelOptions]="{standalone: true}" mat-radio-group
                                                    class="col-md-3 mat-radio-label d-flex align-items-center ">


                                                    <div class="col-md-6 p-0">
                                                        <mat-radio-button value="1">{{'ourcompany' | translate}}
                                                        </mat-radio-button>
                                                    </div>
                                                    <div class="col-md-9 p-0 text-center">
                                                        <mat-radio-button name="party" #party value="2">
                                                            {{'party' | translate}}
                                                        </mat-radio-button>
                                                    </div>
                                                </mat-radio-group>
                                                <div class="col-md-3 pr-0">

                                                    <input *ngIf="party.checked"
                                                        (keyup)="searchTermCustomer($event.target.value)"
                                                        name="PURCHASEFROM" [ngModelOptions]="{standalone: true}"
                                                        [(ngModel)]='newmachine.MAINTENANCEBYNAME'
                                                        [value]="newmachine.MAINTENANCEBYNAME || ''" autocomplete="off"
                                                        class="w-100 form-control error-border form-control-sm">
                                                    <button *ngIf="party.checked" class="close-icon" style="position: absolute;
                                                                    right: 0; top: 8px;"
                                                        (click)="reset1(newmachine)"></button>
                                                    <div *ngIf="arrayItemCustomer != ''" class="search-list-supplier"
                                                        style="margin-top: 24px;width: 720px;">
                                                          <div class="example-loading-shade" *ngIf="isLoading">
                                                            <mat-spinner [diameter]="20" *ngIf="isLoading">
                                                            </mat-spinner>
                                                        </div>
                                                        <table id="selectedValue"
                                                            class="table table-condensed table-striped table-hover">
                                                            <tr class="ui-menu-item" role="menuitem">
                                                                <th>{{'name' | translate}}</th>
                                                                <th>{{'address' | translate}}</th>
                                                            </tr>
                                                            <tr class="ui-menu-item" role="menuitem"
                                                                *ngFor="let result of photosBuffer"
                                                                (click)="onChangeOfItemCodeCustomer(result, newmachine)">
                                                                <td>{{ result.NAME }}</td>
                                                                <td>{{ result.ADDRESS1 }}</td>
                                                            </tr>
                                                        </table>
                                                    </div>
                                                </div>

                                              



                                            </div>
                                            <div class="form-group row col-md-12 mb-2">
                                                <div class="col-md-2 text-right">
                                                    <div class="w-100 bootstrap-switch-on bootstrap-switch-normal bootstrap-switch bootstrap-switch-wrapper bootstrap-switch-animate"
                                                        style="width: 96px;">
                                                        <div class="bootstrap-switch-container "
                                                            style=" margin-left: 0px;padding-right: 1px;">
                                                            <span
                                                                class=" w-100 bootstrap-switch-handle-on bootstrap-switch-success"
                                                                style=" font-weight: bold; font-size: 13px;">{{'warrantyupto'|translate}}</span>
                                                            <span class="bootstrap-switch-label"
                                                                >&nbsp;&nbsp;</span>
                                                            <mat-checkbox name='warranty_applicable'
                                                                #warranty_applicable (change)="1"
                                                                [(ngModel)]="newmachine.UNDERWTY"
                                                                [ngModelOptions]="{standalone: true}"></mat-checkbox>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-md-2 pr-0">
                                                    <mat-form-field *ngIf="warranty_applicable.checked"
                                                        class="w-100 form-control py-1 mat-form-field-date-picker">
                                                        <input [min]="fystartdate" [max]="fyenddate" matInput [matDatepicker]="picker" name="Wtyupto"
                                                            [(ngModel)]="newmachine.UNDEWARRANTYDUEDATE"
                                                            [ngModelOptions]="{standalone: true}">
                                                        <mat-datepicker-toggle matSuffix [for]="picker">
                                                        </mat-datepicker-toggle>
                                                        <mat-datepicker #picker disabled="false"></mat-datepicker>
                                                    </mat-form-field>
                                                </div>
                                                <div class="col-md-1 text-right">
                                                    <div
                                                        class="bootstrap-switch-on bootstrap-switch-normal bootstrap-switch bootstrap-switch-wrapper bootstrap-switch-animate">
                                                        <div class="bootstrap-switch-container "
                                                            style=" margin-left: 0px;">
                                                            <span
                                                                class="bootstrap-switch-handle-on bootstrap-switch-success"
                                                                style=" font-weight: bold; font-size: 13px;">{{'amcupto'|translate}}</span>
                                                            <span class="bootstrap-switch-label">&nbsp;&nbsp;</span>
                                                            <mat-checkbox name='amc_applicable' #amc_applicable
                                                                (change)="1" [(ngModel)]="newmachine.UNDERAMC"
                                                                [ngModelOptions]="{standalone: true}"></mat-checkbox>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class=" pl-2 col-md-2">
                                                    <mat-form-field *ngIf="amc_applicable.checked"
                                                        class="w-100 form-control py-1 mat-form-field-date-picker">
                                                        <input  matInput [matDatepicker]="picker4"
                                                            placeholder=" From Date" name="AMCDUEDATE"
                                                            [min]="newmachine.UNDEWARRANTYDUEDATE" [(ngModel)]="newmachine.AMCDUEDATE"
                                                            [ngModelOptions]="{standalone: true}">
                                                        <mat-datepicker-toggle matSuffix [for]="picker4">
                                                        </mat-datepicker-toggle>
                                                        <mat-datepicker #picker4 disabled="false"></mat-datepicker>
                                                    </mat-form-field>
                                                </div>

                                                <div class=" pl-1 col-md-2">
                                                    <mat-form-field *ngIf="amc_applicable.checked"
                                                        class="w-100 form-control py-1 mat-form-field-date-picker">
                                                        <input  matInput [matDatepicker]="picker9" placeholder=" To Date"
                                                            name="AMCUpto" [min]="newmachine.AMCDUEDATE"
                                                            [(ngModel)]="newmachine.AMCUPTO"
                                                            [ngModelOptions]="{standalone: true}">
                                                        <mat-datepicker-toggle matSuffix [for]="picker9">
                                                        </mat-datepicker-toggle>
                                                        <mat-datepicker #picker9 disabled="false"></mat-datepicker>
                                                    </mat-form-field>
                                                </div>
                                            

                                               
                                            </div>

                                            <div class="form-group row col-md-12 mb-2">
                                                <label
                                                    class="col-md-2  text-right error-control-label required ">
                                                    {{'lastmaintenancedoneon' | translate}}</label>

                                                <div class="col-md-2 d-flex pr-0 text-right pr-0">
                                                    <mat-form-field
                                                        class="w-100 form-control py-1 mat-form-field-date-picker">
                                                        <input  matInput [matDatepicker]="picker5" name="LastMaint"
                                                            [max]="myDate" [(ngModel)]="newmachine.LASTMAINT"
                                                            [ngModelOptions]="{standalone: true}">
                                                        <mat-datepicker-toggle matSuffix [for]="picker5">
                                                        </mat-datepicker-toggle>
                                                        <mat-datepicker #picker5 disabled="false"></mat-datepicker>
                                                    </mat-form-field>

                                                </div>
                                                <label class="col-md-1  text-right error-control-label required"
                                                    for="todate">{{'after' | translate}}</label>
                                                <div class="col-md-2 d-flex ">
                                                    <input type="text" name="chasisno"
                                                        class="w-100 form-control error-border form-control-sm "
                                                        name="LMAfterOps" [(ngModel)]="newmachine.LMAFTEROPS"
                                                        [ngModelOptions]="{standalone: true}"
                                                        oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');"
                                                        maxlength="7">


                                                </div>
                                                <label class="col-md-2  error-control-label required "
                                                    for="todate">{{'operation' | translate}}</label>


                                            </div>
                                            <div class="form-group row col-md-12 mb-2">
                                                <label
                                                    class="col-md-2  text-right error-control-label required ">{{'lastbreakdowndoneon' | translate}}</label>

                                                <div class="col-md-2 d-flex pr-0 text-right pr-0">
                                                    <mat-form-field
                                                        class="w-100 form-control  py-1 mat-form-field-date-picker">
                                                        <input  [max]="myDate" matInput [matDatepicker]="picker6" name="LastBDownMaint"
                                                           [(ngModel)]="newmachine.LASTBDOWNMAINT"
                                                            [ngModelOptions]="{standalone: true}">
                                                        <mat-datepicker-toggle matSuffix [for]="picker6">
                                                        </mat-datepicker-toggle>
                                                        <mat-datepicker #picker6 disabled="false"></mat-datepicker>
                                                    </mat-form-field>

                                                </div>
                                                <label class="col-md-1  text-right error-control-label required"
                                                    for="todate">{{'after' | translate}}</label>
                                                <div class="col-md-2 d-flex ">
                                                    <input name="chasisno"
                                                        class="w-100 form-control error-border form-control-sm "
                                                        name="BMAfterOps"
                                                        oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');"
                                                        maxlength="7" [(ngModel)]="newmachine.BMAFTEROPS"
                                                        [ngModelOptions]="{standalone: true}">


                                                </div>
                                                <label class="col-md-2   error-control-label required "
                                                    for="todate">{{'operation' | translate}}</label>


                                            </div>
                                            <div class="form-group row col-md-12 mb-2">
                                                <label
                                                    class="col-md-2  text-right error-control-label required ">{{'nextmaintenancedueon' | translate}}</label>

                                                <div class="col-md-2 d-flex pr-0 text-right pr-0">
                                                    <mat-form-field
                                                        class="w-100 form-control  py-1 mat-form-field-date-picker">
                                                        <input matInput [matDatepicker]="picker7" name="NextMaint"
                                                            [min]="myDate" [(ngModel)]="newmachine.NEXTMAINT"
                                                            [ngModelOptions]="{standalone: true}">
                                                        <mat-datepicker-toggle matSuffix [for]="picker7">
                                                        </mat-datepicker-toggle>
                                                        <mat-datepicker #picker7 disabled="false"></mat-datepicker>
                                                    </mat-form-field>

                                                </div>
                                                <label class="col-md-1  text-right error-control-label required"
                                                    for="todate">{{'after' | translate}}</label>
                                                <div class="col-md-2 d-flex ">
                                                    <input class="w-100 form-control error-border form-control-sm "
                                                        name="NMAfterOps" [(ngModel)]="newmachine.NMAFTEROPS"
                                                        [ngModelOptions]="{standalone: true}"
                                                        oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');"
                                                        maxlength="7">


                                                </div>
                                                <label class="col-md-2   error-control-label required "
                                                    for="todate">{{'operation' | translate}}</label>


                                            </div>

                                            <div class="form-group row col-md-12 mb-2">
                                                <label
                                                    class="col-md-2  text-right error-control-label required ">{{'calibrationdueon' | translate}}</label>

                                                <div class="col-md-2 d-flex pr-0 text-right pr-0">
                                                    <mat-form-field
                                                        class="w-100 form-control  py-1 mat-form-field-date-picker">
                                                        <input  matInput [matDatepicker]="picker12" name="calibrationdueon"
                                                            [min]="myDate" [(ngModel)]="newmachine.CALIBRATIONDUEON"
                                                            [ngModelOptions]="{standalone: true}">
                                                        <mat-datepicker-toggle matSuffix [for]="picker12">
                                                        </mat-datepicker-toggle>
                                                        <mat-datepicker #picker12 disabled="false"></mat-datepicker>
                                                    </mat-form-field>

                                                </div>
                                                <label class="col-md-1  text-right error-control-label required"
                                                    for="todate">{{'after' | translate}}</label>
                                                <div class="col-md-2 d-flex ">
                                                    <input class="w-100 form-control error-border form-control-sm "
                                                        name="calibrationAfterOps" [(ngModel)]="newmachine.CALIBRATIONAFTEROPS"
                                                        [ngModelOptions]="{standalone: true}"
                                                        oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');"
                                                        maxlength="7">


                                                </div>
                                                <label class="col-md-2   error-control-label required "
                                                    for="todate">{{'operation' | translate}}</label>


                                            </div>


                                            <div class="form-group row col-md-12 mb-2  ">
                                                <label class="col-md-2 text-right error-control-label required"
                                                    for="spltoolsrequiredifany">{{'spltoolsrequiredifany' | translate}}</label>
                                                <div class="col-md-2 d-flex pr-0 text-left" style="height: 40px;">
                                                    <textarea style="height: 40px;" name="SplTools"
                                                        [(ngModel)]="newmachine.SPLTOOLREMARKS "
                                                        [ngModelOptions]="{standalone: true}"
                                                        oninput="this.value = this.value.toUpperCase()" maxlength="500"
                                                        class="w-100 text-left form-control error-border form-control-sm"></textarea>

                                                </div>
                                                <label class="col-md-2 text-right error-control-label required"
                                                    for="splteamrequiredifany">{{'splteamrequiredifany' | translate}}</label>
                                                <div class="col-md-2 d-flex pr-0 text-left p-0" style="height: 40px;">
                                                    <textarea style="height: 40px;" name="SplTeam"
                                                        [(ngModel)]="newmachine.SPLTEAMREMARKS"
                                                        [ngModelOptions]="{standalone: true}"
                                                        oninput="this.value = this.value.toUpperCase()" maxlength="500"
                                                        class="w-100 text-left form-control error-border form-control-sm"></textarea>

                                                </div>
                                                <label class="col-md-2 text-right error-control-label required"
                                                    for="EmergencyContactNo">{{'emergencycontactno' | translate}}</label>
                                                <div class="col-md-2 d-flex pr-0 text-left p-0" style="height: 40px;">
                                                    <textarea style="height: 40px;" name="EmergencyContactNo"
                                                        [(ngModel)]="newmachine.EMERGENCYCONTACT" maxlength="500"
                                                        [ngModelOptions]="{standalone: true}"
                                                        oninput="this.value = this.value.toUpperCase()"
                                                        class="w-100 text-left form-control error-border form-control-sm"></textarea>

                                                </div>
                                            </div>
                                            <div class="form-group row col-md-12 mb-1">
                                                <label
                                                    class="col-md-2 text-right error-control-label required">{{'projectedlife' | translate}}</label>
                                                <label class="col-md-1 text-right error-control-label required"
                                                    for="projectedyears">{{'years' | translate}}</label>
                                                <div class="col-md-1 d-flex pr-0">
                                                    <input type="text" name="ProjLifeYY"
                                                        [(ngModel)]="newmachine.PROJLIFEYY"
                                                        [ngModelOptions]="{standalone: true}"
                                                        oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');"
                                                        maxlength="3"
                                                        class="w-100 form-control error-border form-control-sm">


                                                </div>
                                                <label class="col-md-1 text-right error-control-label required"
                                                    for="projectedmonths">{{'months' | translate}}</label>
                                                <div class="col-md-1 d-flex pr-0">
                                                    <input name="ProjLifeMM"
                                                        (keyup)="checkmonth($event.target.value, newmachine)"
                                                        [(ngModel)]="newmachine.PROJLIFEMM"
                                                        [ngModelOptions]="{standalone: true}"
                                                        oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');"
                                                        maxlength="2"
                                                        class="w-100 form-control error-border form-control-sm ">


                                                </div>
                                                <label class="col-md-1 text-right error-control-label required pr-0"
                                                    for="ProjLifeOps">{{'operations' | translate}}</label>
                                                <div class="col-md-1 d-flex pr-0">
                                                    <input name="ProjLifeOps" [(ngModel)]="newmachine.PROJLIFEOPS"
                                                        [ngModelOptions]="{standalone: true}"
                                                        oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');"
                                                        maxlength="7"
                                                        class="w-100 form-control error-border form-control-sm ">
                                                </div>

                                                <div class="col-md-2 text-right">
                                                    <div class="w-100 bootstrap-switch-on bootstrap-switch-normal bootstrap-switch bootstrap-switch-wrapper bootstrap-switch-animate"
                                                        style="width: 96px;">
                                                        <div class="bootstrap-switch-container "
                                                            style=" margin-left: 0px;padding-right: 1px;">
                                                            <span
                                                                class=" w-100 bootstrap-switch-handle-on bootstrap-switch-success"
                                                                style=" font-weight: bold; font-size: 13px;">{{'discontinued'|translate}}</span>
                                                            <span class="bootstrap-switch-label"
                                                                >&nbsp;&nbsp;</span>
                                                            <mat-checkbox name='warranty_applicable'
                                                                #DISCONTINUEDSTATUS (change)="1"
                                                                [(ngModel)]="newmachine.DISCONTINUEDSTATUS"
                                                                [ngModelOptions]="{standalone: true}"></mat-checkbox>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-md-2 p-0">
                                                    <mat-form-field *ngIf="DISCONTINUEDSTATUS.checked"
                                                        class="w-100 form-control py-1 mat-form-field-date-picker">
                                                        <input [min]="fystartdate" [max]="fyenddate" matInput [matDatepicker]="picker13" name="discontinuedon"
                                                            [(ngModel)]="newmachine.DISCONTINUEDDATE"
                                                            [ngModelOptions]="{standalone: true}">
                                                        <mat-datepicker-toggle matSuffix [for]="picker13">
                                                        </mat-datepicker-toggle>
                                                        <mat-datepicker #picker13 disabled="false"></mat-datepicker>
                                                    </mat-form-field>
                                                </div>

                                          </div>
                                            <div class="form-group row col-md-12 mb-1">
                                                <label
                                                    class="col-md-2 text-right error-control-label required">{{'actuallife' | translate}}</label>
                                                <label class="col-md-1 text-right error-control-label required"
                                                    for="actualyears">{{'years' | translate}}</label>
                                                <div class="col-md-1 d-flex pr-0">
                                                    <input name="ActualLifeYY" [(ngModel)]="newmachine.ACTUALLIFEYY"
                                                        [ngModelOptions]="{standalone: true}"
                                                        oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');"
                                                        maxlength="3"
                                                        class="w-100 form-control error-border form-control-sm">


                                                </div>
                                                <label class="col-md-1 text-right error-control-label required"
                                                    for="actualmonths">{{'months' | translate}}</label>
                                                <div class="col-md-1 d-flex pr-0">
                                                    <input name="ActualLifeMM"
                                                        (keyup)="checkmonth1($event.target.value, newmachine)"
                                                        [(ngModel)]="newmachine.ACTUALLIFEMM"
                                                        [ngModelOptions]="{standalone: true}"
                                                        oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');"
                                                        maxlength="2"
                                                        class="w-100 form-control error-border form-control-sm ">
                                                </div>

                                                <label class="col-md-1 text-right error-control-label required pr-0"
                                                    for="actualoperations">{{'operations' | translate}}</label>
                                                <div class="col-md-1 d-flex pr-0">
                                                    <input name="ActualLifeOps" [(ngModel)]="newmachine.ACTUALLIFEOPS"
                                                        [ngModelOptions]="{standalone: true}"
                                                        oninput="this.value = this.value.replace(/[^0-9.]/g, '').replace(/(\..*)\./g, '$1');"
                                                        maxlength="7"
                                                        class="w-100 form-control error-border form-control-sm ">
                                                </div>

                                            </div>

                                            <div class="form-group row col-md-12 mb-1">
                                            <label class="col-md-2 text-right error-control-label required"
                                            for="splremarks">{{'splremarks'| translate}}</label>
                                        <div class="col-md-6 d-flex pr-0 text-left p-0" style="height: 40px;">
                                            <textarea style="height: 40px;" name="splremarks"
                                                [(ngModel)]="newmachine.SPLREMARKS" maxlength="500"
                                                [ngModelOptions]="{standalone: true}"
                                                oninput="this.value = this.value.toUpperCase()"
                                                class="w-100 text-left form-control error-border form-control-sm"></textarea>
                                        </div>
                                        </div>
                                    </div>
                                        <div class="form-inline">
                                            <div class="col-md-12">
                                                <div class="card-body p-0 mb-1 position-relative">
                                                    <ul class="nav nav-tabs custom-pills font-sm font-weight-sb"
                                                        id="pills-tab" role="tablist">
                                                        <li class="nav-item">
                                                            <a class="nav-link active show" id="qualification_term"
                                                                data-toggle="pill" href="#qualification" role="tab"
                                                                aria-selected="false">{{'fixedassetregister' | translate}}</a>
                                                        </li>

                                                        <!-- <li class="nav-item">
                                                            <a class="nav-link" id="experience_term" data-toggle="pill"
                                                                href="#experience" role="tab"
                                                                aria-selected="false">{{'attachducuments' | translate}}</a>
                                                        </li> -->
                                                    </ul>
                                                    <div class="table-scroll">
                                                        <div class="tab-content m-t-10" id="pills-tabContent">

                                                            <div class="tab-pane fade active show" id="qualification"
                                                                role="tabpanel" aria-labelledby="qualification_term">
                                                                <div class="scroll-spy" data-spy="scroll"
                                                                    data-target="#navbar-example2" data-offset="0">
                                                                    <div
                                                                        class="card-body border-top purchase-order px-0 py-2">
                                                                        <div class="table-wrapper-scroll"
                                                                            style="max-height: 300px;">
                                                                            <table
                                                                                class="table table-striped custom-table tr th">
                                                                                <thead>
                                                                                    <tr style="background-color: #666666; color: #ffffff;">
                                                                                        <th scope="col" style="width:4%;">
                                                                                            {{'sr' | translate}}</th>
                                                                                        <th scope="col" style="width:20%;">
                                                                                            {{'assetno' | translate}}
                                                                                        </th>
                                                                                        <th scope="col" style="width:25%;">
                                                                                            {{'currentlocation' | translate}}
                                                                                        </th>
                                                                                        <th scope="col" style="width:10%;">
                                                                                            {{'procuredon' | translate}}
                                                                                        </th>
                                                                                        <th scope="col" style="width:10%;">
                                                                                            {{'installedon' | translate}}
                                                                                        </th>
                                                                                        <!-- <th scope="col" style="width:10%;">
                                                                                            {{'manufacturedon' | translate}}
                                                                                        </th> -->
                                                                                        <th scope="col" style="width:10%;">
                                                                                            {{'operationalon' | translate}}
                                                                                        </th>
                                                                                    
                                                                                        <th scope="col" style="width:6%;text-align: center;">
                                                                                            {{'action' | translate}}
                                                                                        </th>
                                                                                    </tr>
                                                                                </thead>
                                                                                <tbody class="font-sm">
                                                                                    <tr>
                                                                                        <td>
                                                                                            <strong></strong>
                                                                                        </td>
                                                                                    
                                                                                        <td>
                                                                                            <input name="assetno" class="w-100 form-control error-border form-control-sm" [(ngModel)]='newContact.ASSETNO'
                                                                                                [ngModelOptions]="{standalone: true}" [value]="newContact.ASSETNO || ''" maxlength="100">
                                                                                        </td>
                                                                                    
                                                                                        <td>
                                                                                            <input name="currentlocation" class="w-100 form-control error-border form-control-sm"
                                                                                                [(ngModel)]='newContact.CURRENTLOC' [ngModelOptions]="{standalone: true}"
                                                                                                [value]="newContact.CURRENTLOC || ''" maxlength="100">
                                                                                        </td>
                                                                                    
                                                                                        <td>
                                                                                            <div class="form-group">
                                                                                                <mat-form-field class="form-control py-1 mat-form-field-date-picker">
                                                                                                    <input matInput [matDatepicker]="picker3" [min]="fystartdate" [max]="myDate"
                                                                                                        [(ngModel)]='newContact.PROCUREDON' [ngModelOptions]="{standalone: true}"
                                                                                                        [value]="newContact.PROCUREDON || ''">
                                                                                                    <mat-datepicker-toggle matSuffix [for]="picker3">
                                                                                                    </mat-datepicker-toggle>
                                                                                                    <mat-datepicker #picker3>
                                                                                                    </mat-datepicker>
                                                                                                </mat-form-field>
                                                                                            </div>
                                                                                        </td>
                                                                                    
                                                                                        <td>
                                                                                            <div class="form-group">
                                                                                                <mat-form-field class="form-control py-1 mat-form-field-date-picker">
                                                                                                    <input matInput [matDatepicker]="picker8" [min]="fystartdate" [max]="myDate"
                                                                                                        [(ngModel)]='newContact.INSTALLEDON' [ngModelOptions]="{standalone: true}"
                                                                                                        [value]="newContact.INSTALLEDON || ''">
                                                                                                    <mat-datepicker-toggle matSuffix [for]="picker8">
                                                                                                    </mat-datepicker-toggle>
                                                                                                    <mat-datepicker #picker8>
                                                                                                    </mat-datepicker>
                                                                                                </mat-form-field>
                                                                                            </div>
                                                                                        </td>

                                                                                        <!-- <td>
                                                                                            <div class="form-group">
                                                                                                <mat-form-field class="form-control py-1 mat-form-field-date-picker">
                                                                                                    <input matInput [matDatepicker]="picker9" [min]="fystartdate" [max]="myDate"
                                                                                                        [(ngModel)]='newContact.manufacturedon' [ngModelOptions]="{standalone: true}"
                                                                                                        [value]="newContact.manufacturedon || ''">
                                                                                                    <mat-datepicker-toggle matSuffix [for]="picker9">
                                                                                                    </mat-datepicker-toggle>
                                                                                                    <mat-datepicker #picker9>
                                                                                                    </mat-datepicker>
                                                                                                </mat-form-field>
                                                                                            </div> -->
                                                                                        <!-- </td> -->
                                                                                    
                                                                                        <td>
                                                                                            <div class="form-group">
                                                                                                <mat-form-field class="form-control py-1 mat-form-field-date-picker">
                                                                                                    <input matInput [matDatepicker]="picker9" [min]="fystartdate" [max]="myDate"
                                                                                                        [(ngModel)]='newContact.OPERATIONALON' [ngModelOptions]="{standalone: true}"
                                                                                                        [value]="newContact.OPERATIONALON || ''">
                                                                                                    <mat-datepicker-toggle matSuffix [for]="picker9">
                                                                                                    </mat-datepicker-toggle>
                                                                                                    <mat-datepicker #picker9>
                                                                                                    </mat-datepicker>
                                                                                                </mat-form-field>
                                                                                            </div>
                                                                                        </td>
                                                                                    
                                                                                        <td style="width:60px;text-align: center;">
                                                                                            <i (click)="addContact()" class="fas fa-plus {{canCreateCommonClass}}"></i>
                                                                                        </td>
                                                                                    
                                                                                    </tr>

                                                                                    <tr *ngFor="let contact of contacts ; let i = index">
                                                                                    
                                                                                        <td *ngIf="contact.ID == editContactID">
                                                                                            <input type="text" class="form-control w-100" [readonly]="true" [(ngModel)]='contact.ID'
                                                                                                [ngModelOptions]="{standalone: true}">
                                                                                        </td>
                                                                                        <td *ngIf="contact.ID != editContactID" (dblclick)="editContact(contact.ID)">
                                                                                            {{i+1}}</td>
                                                                                    
                                                                                        <td width="30%" *ngIf="contact.ID === editContactID">
                                                                                            <input type="text" class="form-control w-100" (keyup.enter)="updateContact(contact)"
                                                                                                [(ngModel)]='contact.ASSETNO' [ngModelOptions]="{standalone: true}" maxlength="100">
                                                                                        </td>
                                                                                        <td width="30%" *ngIf="contact.ID !== editContactID" (dblclick)="editContact(contact.ID)">
                                                                                            {{contact.ASSETNO | titlecase}}</td>
                                                                                    
                                                                                        <td width="30%" *ngIf="contact.ID === editContactID">
                                                                                            <input type="text" class="form-control w-100" (keyup.enter)="updateContact(contact)"
                                                                                                [(ngModel)]='contact.CURRENTLOC' [ngModelOptions]="{standalone: true}" maxlength="100">
                                                                                        </td>
                                                                                        <td width="30%" *ngIf="contact.ID !== editContactID" (dblclick)="editContact(contact.ID)">
                                                                                            {{contact.CURRENTLOC | titlecase}}</td>
                                                                                    
                                                                                        <td width="30%" *ngIf="contact.ID === editContactID">
                                                                                            <div class="form-group">
                                                                                                <mat-form-field class="form-control py-1 mat-form-field-date-picker">
                                                                                                    <input matInput [matDatepicker]="picker3" [min]="myDate" [max]="fyenddate"
                                                                                                        [(ngModel)]='contact.PROCUREDON' [ngModelOptions]="{standalone: true}">
                                                                                                    <mat-datepicker-toggle matSuffix [for]="picker3">
                                                                                                    </mat-datepicker-toggle>
                                                                                                    <mat-datepicker #picker3>
                                                                                                    </mat-datepicker>
                                                                                                </mat-form-field>
                                                                                            </div>
                                                                                        </td>
                                                                                        <td width="30%" *ngIf="contact.ID !== editContactID" (dblclick)="editContact(contact.ID)">
                                                                                            {{contact.PROCUREDON  | date: 'dd/MM/yyyy'}}
                                                                                        </td>
                                                                                    
                                                                                        <td width="30%" *ngIf="contact.ID === editContactID">
                                                                                            <div class="form-group">
                                                                                                <mat-form-field class="form-control py-1 mat-form-field-date-picker">
                                                                                                    <input matInput [matDatepicker]="picker3" [min]="myDate" [max]="fyenddate"
                                                                                                        [(ngModel)]='contact.INSTALLEDON' [ngModelOptions]="{standalone: true}">
                                                                                                    <mat-datepicker-toggle matSuffix [for]="picker3">
                                                                                                    </mat-datepicker-toggle>
                                                                                                    <mat-datepicker #picker3>
                                                                                                    </mat-datepicker>
                                                                                                </mat-form-field>
                                                                                            </div>
                                                                                        </td>
                                                                                        <td width="30%" *ngIf="contact.ID !== editContactID" (dblclick)="editContact(contact.ID)">
                                                                                            {{contact.INSTALLEDON  | date: 'dd/MM/yyyy'}}
                                                                                        </td>

                                                                                        <!-- <td width="30%" *ngIf="contact.ID === editContactID">
                                                                                            <div class="form-group">
                                                                                                <mat-form-field class="form-control py-1 mat-form-field-date-picker">
                                                                                                    <input matInput [matDatepicker]="picker3" [min]="myDate" [max]="fyenddate"
                                                                                                        [(ngModel)]='contact.manufacturedon' [ngModelOptions]="{standalone: true}">
                                                                                                    <mat-datepicker-toggle matSuffix [for]="picker3">
                                                                                                    </mat-datepicker-toggle>
                                                                                                    <mat-datepicker #picker3>
                                                                                                    </mat-datepicker>
                                                                                                </mat-form-field>
                                                                                            </div>
                                                                                        </td>
                                                                                        <td width="30%" *ngIf="contact.ID !== editContactID" (dblclick)="editContact(contact.ID)">
                                                                                            {{contact.manufacturedon  | date: 'dd/MM/yyyy'}}
                                                                                        </td> -->
                                                                                    
                                                                                        <td width="30%" *ngIf="contact.ID === editContactID">
                                                                                            <div class="form-group">
                                                                                                <mat-form-field class="form-control py-1 mat-form-field-date-picker">
                                                                                                    <input matInput [matDatepicker]="picker3" [min]="myDate" [max]="fyenddate"
                                                                                                        [(ngModel)]='contact.OPERATIONALON' [ngModelOptions]="{standalone: true}">
                                                                                                    <mat-datepicker-toggle matSuffix [for]="picker3">
                                                                                                    </mat-datepicker-toggle>
                                                                                                    <mat-datepicker #picker3>
                                                                                                    </mat-datepicker>
                                                                                                </mat-form-field>
                                                                                            </div>
                                                                                        </td>
                                                                                        <td width="30%" *ngIf="contact.ID !== editContactID" (dblclick)="editContact(contact.ID)">
                                                                                            {{contact.OPERATIONALON | date: 'dd/MM/yyyy'}}
                                                                                        </td>
                                                                                        <td style="width:60px;text-align: center;">
                                                                                            <div>
                                                                                                <i *ngIf="contact.ID === editContactID" class="fas fa-check customIcon {{canEditCommonClass}}"
                                                                                                    (click)="updateContact(contact)"></i>
                                                                                                <i *ngIf="contact.ID !== editContactID" class="fas fa-edit customIcon {{canEditCommonClass}}"
                                                                                                    (click)="editContact(contact.ID)"></i>
                                                                                                <i style="margin-left: 5px;" class="far fa-trash-alt customIcon {{canDeleteCommonClass}}"
                                                                                                    (click)="removeContact(i)"></i>
                                                                                            </div>
                                                                                        </td>
                                                                                    
                                                                                    </tr>
                                                                                </tbody>
                                                                            </table>
                                                                        </div>
                                                                    </div>

                                                                </div>
                                                            </div>

                                                            <div class="tab-pane fade" id="experience" role="tabpanel"
                                                                aria-labelledby="experience_term">
                                                                <div class="scroll-spy" data-spy="scroll"
                                                                    data-target="#navbar-example2" data-offset="0">
                                                                    <div
                                                                        class="card-body border-top purchase-order px-0 py-2">
                                                                        <div class="table-wrapper-scroll"
                                                                            style="max-height: 300px;">
                                                                            <div>
                                                                                <input #file type="file" multiple
                                                                                    (change)="upload(file.files)" />
                                                                            </div>
                                                                            <table
                                                                                class="table table-striped custom-table">
                                                                                <thead>
                                                                                    <tr
                                                                                        style="background-color: #666666; color: #ffffff;">
                                                                                        <th scope="col"
                                                                                            style="width:5%;">
                                                                                            {{'sr' | translate}}</th>
                                                                                        <th scope="col"
                                                                                            style="width:80%;">
                                                                                            {{'name' | translate}}</th>
                                                                                        <th scope="col"
                                                                                            style="width:10%;">
                                                                                            {{'download' | translate}}
                                                                                        </th>
                                                                                        <th scope="col"
                                                                                            style="width:10%;">
                                                                                            {{'image' | translate}}</th>
                                                                                        <th scope="col"
                                                                                            style="width:10%;">
                                                                                            {{'action' | translate}}
                                                                                        </th>
                                                                                    </tr>
                                                                                </thead>
                                                                                <tbody class="font-sm">
                                                                                    <tr
                                                                                        *ngFor="let image of imagesArray ; let i = index">
                                                                                        <td>{{i+1}}</td>
                                                                                        <td>{{image.filename}}</td>
                                                                                        <td>
                                                                                            <i class="fas fa-download customIcon"
                                                                                                (click)="download(image)"></i>
                                                                                        </td>
                                                                                        <td class="custom-img-icon">
                                                                                            <p-lightbox
                                                                                                [images]="image.images">
                                                                                            </p-lightbox>

                                                                                        </td>
                                                                                        <td>
                                                                                            <i (click)="addContact()"
                                                                                                class="fas fa-plus {{canCreateCommonClass}}"></i>

                                                                                        </td>
                                                                                    </tr>

                                                                                </tbody>
                                                                            </table>
                                                                        </div>
                                                                    </div>

                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>


                                    </div>
                                </div>
                            </div>


                            <div class="modal-footer">
                                <button type="button" class="btn btn-sm btn-secondary rounded bg-danger"
                                [routerLink]="['/machine-master']">{{'cancel'|translate}}</button>
                                <button *ngIf="action == 'new'" [disabled]="isLoadingResults" type="button" class="btn btn-sm btn-info rounded {{canCreateCommonClass}}"
                                    (click)="validateBeforeSave(newmachine , 'Insert')">{{'save'|translate}}</button>
                                <button *ngIf="action == 'edit'" [disabled]="isLoadingResults" type="button" class="btn btn-sm btn-info rounded {{canEditCommonClass}}"
                                    (click)="validateBeforeSave(newmachine , 'Update')">{{'update'|translate}}</button>
                            </div>
                        </div>
                    </div>
                </div>
            </form>

            <div *ngIf="userRightCheck.canview == 'False'" class="row">
                <div class="col-md-12">
                    <div class="card">
                        <div class="card-body">
                            {{'youhavenotpermission' | translate}}
                        </div>
                    </div>
                </div>
            </div>
            <app-footer></app-footer>
        </div>
    </div>
</div>