<div class="preloader" style="display: none;">
	<div class="lds-ripple">
		<div class="lds-pos"></div>
		<div class="lds-pos"></div>
	</div>
</div>
<div id="main-wrapper" data-theme="light" data-layout="vertical" data-navbarbg="skin6" data-sidebartype="full"
	data-sidebar-position="fixed" data-header-position="fixed" data-boxed-layout="full">
	<app-header></app-header>
	<app-sidebar></app-sidebar>

	<div class="page-wrapper">
		<div class="container-fluid" style="background:#dcdcdc;">
			<div class="row {{canViewCommonClass}}">
				<div class="col-md-12">
					<div class="card" style="border-top: 2px solid #0e43af;box-shadow:0 1px 3px rgba(0,0,0,.3);">
						<div class="card-body border-bottom py-2 mb-2">
							<div class="d-md-flex align-items-center">
								<div class="form-row mx-0 d-flex bd-highlight w-100">
									<h4 class="card-title m-0">{{ 'itemmaster' | translate }}</h4>
									<div class="form-group mx-4 mb-2">
										<button
											class="btn btn-sm rounded btn-info waves-effect waves-light {{canCreateCommonClass}}"
											(click)="openDialog()"><i class="ti-plus"></i>&nbsp;{{'newitem'|
											translate}}</button>
									</div>
									<div>
										<span class="d-flex">
											<input type="text" class="form-control form-control-sm search-box"
												[(ngModel)]="name" [ngModelOptions]="{standalone: true}"
												placeholder="{{'search'|translate}}" (keyup.enter)="applyFilter(name)">
											<button class="close-icon" (click)="reset(name)"></button>
											<button type="submit"
												class="btn btn-sm rounded btn-info waves-effect waves-light ml-1"
												style="overflow: visible;"
												(click)="applyFilter(name)">{{'search'|translate}}</button></span>
									</div>
									<div class="form-group mr-2 mb-2 ml-auto bd-highlight">
										<button type="submit"
											class="btn btn-sm rounded btn-info waves-effect waves-light {{canExportCommonClass}}"
											(click)="exportToExcel()"><i class="fa fa-file-excel"></i>&nbsp;{{'export'|
											translate}}</button>
									</div>
								</div>
							</div>
							<div class="card-body border-top supplier-master px-0 py-2">
								<div class="row- ">
									<div class="form-row mx-0">
										<div class="form-group mr-2 col-md-2 mb-2">
											<label for="inputEmail4">{{'maincategory'| translate}}</label>
											<ngx-select
												class="ngx-custom-select-dropdown ngx-custom-category-select ngx-custom-select-dropdown-text-wrap"
												[allowClear]="true" [items]="getitemcategory" optionValueField="id"
												optionTextField="name"
												(selectionChanges)="itemCtaegoryChange($event, 'parent')">
											</ngx-select>
										</div>
										<div class="form-group mr-2 col-md-2 mb-2">
											<label for="inputEmail4">{{'subcategory'| translate}}</label>
											<ngx-select
												class="ngx-custom-select-dropdown ngx-custom-category-select ngx-custom-select-dropdown-text-wrap"
												[allowClear]="true" [items]="childCategory" optionValueField="id"
												optionTextField="categname"
												(selectionChanges)="itemCtaegoryChange($event, 'child')">
											</ngx-select>
										</div>
										<div class="form-group mr-2 col-md-2 mb-2">
											<label for="inputPassword4">{{'itemtype'| translate}}</label>
											<ng-multiselect-dropdown [data]="getitemtype" [settings]="dropdownSettings"
												[(ngModel)]="selectedItems" [ngModelOptions]="{standalone: true}"
												(ngModelChange)="onItemSelect()" class="ms-dd">
											</ng-multiselect-dropdown>
										</div>
										<div class="form-group mr-2 col-md-2 mb-2">
											<label for="inputEmail4">{{'store'| translate}}</label>
											<ngx-select
												class="ngx-custom-select-dropdown ngx-custom-category-select ngx-custom-select-dropdown-text-wrap"
												[allowClear]="true" [items]="storeData" optionValueField="id"
												optionTextField="name" (selectionChanges)="storeChangeFunction($event)">
											</ngx-select>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>

				<!-- ============================================================== -->
				<!-- Sales chart -->
				<!-- ============================================================== -->

				<!-- ============================================================== -->
				<!-- Ravenue - page-view-bounce rate -->
				<!-- ============================================================== -->
				<div class="col-md-12">
					<div class="d-flex justify-content-between align-items-stretch w-100 boxed-layout">
						<div class="w-100">
							<div class="example-loading-shade" *ngIf="isLoadingResults ">
								<mat-spinner [diameter]="40" *ngIf="isLoadingResults"></mat-spinner>


							</div>
							<div class="example-container table-responsive"
								style="box-shadow:0 1px 3px rgba(0,0,0,.3);">
								<table mat-table [dataSource]="ItemArray" matSort
									class="mat-elevation-z8 table table-sm table-striped w-100 mb-0 mat-table" #table>
									<!-- Item Code Column -->
									<ng-container matColumnDef="itemcode">
										<th mat-header-cell *matHeaderCellDef mat-sort-header
											class="py-1 font-weight-bold text-dark sticky-cell"> <a
												style="color: #0e43af !important">Item Code</a> </th>
										<td mat-cell *matCellDef="let element" (click)="editContact(element)"><a 
												style="color: #0e43af !important;cursor: pointer !important;">{{element.ITEMCODE}}</a>
										</td>
									</ng-container>

									<!-- Item Name Column -->
									<ng-container matColumnDef="itemname">
										<th mat-header-cell *matHeaderCellDef mat-sort-header
											class="py-1 font-weight-bold text-dark sticky-cell" style="width:30%"><a
												style="color: #0e43af !important">Item Name</a> </th>
										<td mat-cell *matCellDef="let element" matTooltip="{{ element.itemname }}" (click)="editContact(element)"
											aria-label="Button that displays a tooltip when focused or hovered over"><a
												style="color: #0e43af !important;cursor: pointer !important;"><span
													class="limittext" style="width: 300px;">{{ element.ITEMNAME
													}}</span></a> </td>
									</ng-container>

									<!-- Old Code Column -->
									<ng-container matColumnDef="oldcode">
										<th mat-header-cell *matHeaderCellDef mat-sort-header
											class="py-1 font-weight-bold text-dark sticky-cell"> <a
												style="color: #0e43af !important">Min. Level</a></th>
										<td mat-cell *matCellDef="let element" style="text-align: right;"> {{element.MINIMUMLEVEL}} </td>
									</ng-container>

									<!-- Item Category Column -->
									<ng-container matColumnDef="itemcategoryname">
										<th mat-header-cell *matHeaderCellDef mat-sort-header
											class="py-1 font-weight-bold text-dark sticky-cell "> <a
												style="color: #0e43af !important">Max. Level</a></th>
										<td mat-cell *matCellDef="let element" style="text-align: right;"> {{element.MAXIMUMLEVEL}} </td>
									</ng-container>

									<ng-container matColumnDef="unit">
										<th mat-header-cell *matHeaderCellDef mat-sort-header
											class="py-1 font-weight-bold text-dark sticky-cell "> <a
												style="color: #0e43af !important">Unit</a></th>
										<td mat-cell *matCellDef="let element" style="text-align: right;"> {{element.UNITID}} </td>
									</ng-container>	
									
									<ng-container matColumnDef="class">
										<th mat-header-cell *matHeaderCellDef mat-sort-header
											class="py-1 font-weight-bold text-dark sticky-cell "> <a
												style="color: #0e43af !important">ABC Class</a></th>
										<td mat-cell *matCellDef="let element" style="text-align: right;"> {{element.ABCCLASS}} </td>
									</ng-container>	
									
									<ng-container matColumnDef="location">
										<th mat-header-cell *matHeaderCellDef mat-sort-header
											class="py-1 font-weight-bold text-dark sticky-cell "> <a
												style="color: #0e43af !important">Location</a></th>
										<td mat-cell *matCellDef="let element" style="text-align: right;"> {{element.LOCATION}} </td>
									</ng-container>

									<tr mat-header-row *matHeaderRowDef="displayedColumns sticky: true "
										class="bg-light" style="height:auto;"></tr>
									<tr mat-row *matRowDef="let row; columns: displayedColumns;" style="height:auto;">
									</tr>
								</table>

								<mat-paginator class="mat-paginator-sticky sticky-cell" (page)="getUpdate($event)"
									[length]="resultsLength" [pageSizeOptions]="[ 20,50,100]" [pageSize]="20"
									showFirstLastButtons>
								</mat-paginator>
							</div>
						</div>
					</div>
				</div>
			</div>

			<div *ngIf="userRightCheck.canview == 'False'" class="row">
				<div class="col-md-12">
					<div class="card">
						<div class="card-body">
							{{'youhavenotpermission' | translate}}
						</div>
					</div>
				</div>
			</div>
			<app-footer></app-footer>
		</div>
	</div>
</div>